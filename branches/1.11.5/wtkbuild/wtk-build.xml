<?xml version="1.0"?>

<project name="RSSReader" default="build" basedir="." >

	<!-- IB 2010-03-08 1.11.4RC1 Use wtkjad to create non-Blackberry JAD/manifest file. -->
	<!-- IB 2010-03-08 1.11.4RC1 Use latest antenna 1.2.1 beta -->
	<!-- IB 2010-03-08 1.11.4RC1 Use latest proguard 4.5 beta3 -->
	<!-- IB 2010-03-08 1.11.4RC1 Use proguard task.  -->
	<!-- IB 2010-03-08 1.11.4RC1 Use observer pattern for feed parsing to prevent hangs from spotty networks and bad URLs. -->
	<!-- IB 2010-03-08 1.11.4RC1 Use googlecode_upload.pl to upload to Google Project Hosting. -->
	<!-- IB 2010-03-08 1.11.4RC1 Create smartphone version with just MIDP 2.0.  -->
	<!-- IB 2010-03-08 1.11.4RC1 Create archive files.  -->
	<!-- IB 2010-03-08 1.11.4RC1 Don't create empty version directory.  -->
	<!-- IB 2010-03-08 1.11.4RC1 Use zip for src as the file paths are too long for non-GNU tar.  -->
	<!-- IB 2010-03-08 1.11.4RC1 Use - in cod files before version instead of _.  -->
	<!-- IB 2010-03-08 1.11.4RC1 Use project.file.prefix for project archives.  -->
	<!-- IB 2010-03-08 1.11.4RC1 Use STAGE in description.  -->
	<!-- IB 2010-03-08 1.11.4RC1 Make test distribution target with only MIDP 2.0 and MIDP 2.0 with JSR-75.  -->
	<!-- IB 2010-03-09 1.11.4RC2 Remove unneeded directories.  -->
	<!-- IB 2010-03-09 1.11.4RC2 Create non JSR-75 smartphone/podcast version.  -->
	<!-- IB 2010-03-09 1.11.4RC2 Create itunes test target.  -->
	<!-- IB 2010-03-09 1.11.4RC2 Fix smartphone zip.  -->
	<!-- IB 2010-03-09 1.11.5RC1 Add labels to all artifacts.  -->
	<!-- IB 2010-03-09 1.11.5RC1 Spell Google as Google not googl.  -->
	<!-- IB 2010-03-09 1.11.5RC1 Partial fix for using findbugs.  -->
	<!-- IB 2010-03-09 1.11.5RC1 Create obfuscate map.  -->
	<!-- IB 2010-03-09 1.11.5RC1 Use CLDC 1.1 for smartphone versions. -->
    <!-- IB 2010-05-25 1.11.5RC2 Use properties files based on midp, cldc, and JSRs used individually instead of combining them. -->
    <!-- IB 2010-05-25 1.11.5RC2 Use cldc10 for naming in CLDC 1.0 versions. -->
    <!-- IB 2010-05-26 1.11.5RC2 Use common build.vers and dist.vers properties. -->
    <!-- IB 2010-05-26 1.11.5RC2 Handle stage releases better. -->
    <!-- IB 2010-05-26 1.11.5RC2 Remove *.debug file from regular and smartphone bin files. -->
    <!-- IB 2010-05-28 1.11.5RC2 Changes for findbugs for future.  -->
    <!-- IB 2010-05-28 1.11.5RC2 Change order of uploads for zips so that regular bin zip is last so that it will be at the top of the list.  -->
    <!-- IB 2010-05-28 1.11.5RC2 Make input file for sftp for sites that allow upload with sftp.  -->
    <!-- IB 2010-05-30 1.11.5RC2 Improve dist.test.  -->
    <!-- IB 2010-05-30 1.11.5RC2 Add signed targets for MIDP 1.0, MIDP 2.0, MIDP 2.0 and JSR 75. -->
    <!-- IB 2010-06-01 1.11.5RC2 Taylor images in the jar for the right releases.  File images are only applicable to JSR-75.  -->
    <!-- IB 2010-06-01 1.11.5RC2 New target compile for distribution for CLDC 1.1, itunes, and JSR-75.  -->
    <!-- IB 2010-06-29 1.11.5RC2 Use stage.stable.text to specify if this stage is stable or unstable.  -->
    <!-- IB 2010-06-29 1.11.5RC2 More logging.  -->
    <!-- IB 2010-06-29 1.11.5RC2 Put signed into file names for signed targets.  -->
    <!-- IB 2010-06-29 1.11.5RC2 Delete and then create the zip file to avoid problems from previous creation.  -->
    <!-- IB 2010-06-29 1.11.5RC2 Allow parameters mjadfile and mjarfile to specify the jad/jar names for more flexibility.  -->
    <!-- IB 2010-06-29 1.11.5RC2 Allow Thawte signed jad/jar files.  -->
    <!-- IB 2010-06-29 1.11.5RC2 Don't create RIM version if Thawte signed.  -->
    <!-- IB 2010-06-29 1.11.5RC2 Use stage.featured to allow featured label to be changed.  -->
    <!-- IB 2010-06-29 1.11.5RC2 Use wtkpreprocess and wtkobfuscate since proguard task does not work directly.  -->
    <!-- IB 2010-07-02 1.11.5RC2 Don't have MIDP 1.0 signed or unsigned or MIDP 2.0 signed be featured. -->
    <!-- IB 2010-07-02 1.11.5RC2 Only use signed versions for smartphone version.  -->
    <!-- IB 2010-07-03 1.11.5Dev3 Fix Thawte signing so that the signed jar gets distributed and that the jad gets signed with correct byte size.  -->
    <!-- IB 2010-07-03 1.11.5Dev4 Fix Thawte signing so that jarsigner and JadTool are used instead of wtksign.  This puts the certificates into the jar file and adds 3 certificates to the jad file instead of 1.  -->
    <!-- IB 2010-07-03 1.11.5Dev4 Put release_notes-(current version w/underscores).txt into sftp download directory. -->
    <!-- IB 2010-07-05 1.11.5Dev6 Use original.author to put in Tommi's name. -->
    <!-- IB 2010-07-05 1.11.5Dev6 Don't make the zip files if we are skipping svn export. -->
    <!-- IB 2010-07-05 1.11.5Dev6 Use Yinlight, LLC for vendor and www.yinlight.net for info url, only if signed.  Otherwise, the app is treated as a different app.  -->
    <!-- IB 2010-07-05 1.11.5Dev6 Fix creating signed JAD so that it copies the jad with overwrite.  -->
    <!-- IB 2010-07-05 1.11.5Dev6 Have dist.no.signed target to not sign any files.  This helps if the certificate is pending.  -->
    <!-- IB 2010-07-05 1.11.5Dev7 Use new ant feature that allows you to use an expression that evaluates to true in the target attribute 'if'.  -->
    <!-- IB 2010-07-05 1.11.5Dev7 Put changelog-(current version w/underscores).txt into sftp download directory.  -->
    <!-- IB 2010-07-05 1.11.5Dev7 Put gpl.txt into sftp download directory.  -->
    <!-- IB 2010-07-05 1.11.5Dev7 Include version number in gpl.txt as gpl-2.txt.  -->
    <!-- IB 2010-07-05 1.11.5Dev7 Include version 2.1 of the LGPL as lgpl-2_1.txt and distribute where gpl-2.txt is.  -->
    <!-- IB 2010-07-09 1.11.5Dev7 Use no.individual.file to turn off copying jad/jar/cod files to google distribution.  This is done for dev releases.  -->
    <!-- IB 2010-07-10 1.11.5Dev8 Remove unused wtk.properties.  -->
    <!-- IB 2010-07-10 1.11.5Dev8 Don't use manifestsrc as the manifest is generated by wtkjad.  -->
    <!-- IB 2010-07-10 1.11.5Dev8 Don't use jadsrc as the jad is generated by wtkjad.  -->
    <!-- IB 2010-07-10 1.11.5Dev8 Use only JSR-75 versions for smartphones.  -->
    <!-- IB 2010-07-10 1.11.5Dev8 Remove unused build directories.  -->
    <!-- IB 2010-07-29 1.11.5Dev8 Add stable/unstable to expert binary.  -->
    <!-- IB 2010-07-30 1.11.5Dev8 Use release.name for build file name for projects with multiple release files.  -->
    <!-- IB 2010-10-06 1.11.5Dev9 Use directory of path containing preverify for rapc, not the path to preverify. -->
    <!-- IB 2010-10-06 1.11.5Dev9 Use special alx directory to zip alx and cod files. -->
    <!-- IB 2010-10-06 1.11.5Dev9 Log jde.home and rim.home in display.props. -->
    <!-- IB 2010-10-06 1.11.5Dev9 Use ant blackberry build tools to optionally create blackberry jar, jad, cso, cod, and alx. -->
    <!-- IB 2010-10-06 1.11.5Dev9 Create zip file for alx directory. -->
    <!-- IB 2010-10-06 1.11.5Dev9 Fix MIDlet-Jar-URL to correct value. -->
    <!-- IB 2010-10-06 1.11.5Dev9 Change RIM file creation directly using jar to set jde.home. -->
    <!-- IB 2010-10-11 1.11.5Dev9 Use jde.home.path for path to jde.home so that we can set jde.home dynamically.  -->
    <!-- IB 2010-10-11 1.11.5Dev9 Have option to use jar.jde.home for using Blackberry jar directly. -->
    <!-- IB 2010-10-11 1.11.5Dev9 Use bb.jde.home for Blackberry ant tasks path to jde.home.  -->
    <!-- IB 2010-10-11 1.11.5Dev9 Use mweb.jarfile to use correct jar path in jad file.  -->
    <!-- IB 2010-10-11 1.11.5Dev9 Use jsjar.fn for jar file name including suffix.  -->
    <!-- IB 2010-10-12 1.11.5Dev9 Remove extra dash dash labels=. from google upload. -->
    <!-- IB 2010-10-12 1.11.5Dev9 Use windows.os to tell if windows OS so we can convert jad to dos with conv.dos and todos.comd if not windows.-->
    <!-- IB 2010-10-12 1.11.5Dev10 Must set mweb.jarfile for making jad file.  -->
    <!-- IB 2010-10-12 1.11.5Dev10 Have separate sign of rim file. -->
    <!-- IB 2010-11-16 1.11.5Dev14 Create godaddy signed itunes, jsr-75, cldc 1.1 version. -->
    <!-- IB 2010-11-16 1.11.5Dev14 Remove cod files in wtkbuild.  -->
    <!-- IB 2010-11-16 1.11.5Dev14 Remove LogFile.txt file in wtkbuild.  -->
    <!-- IB 2010-11-16 1.11.5Dev14 Have prepare for verisign signing.  -->
    <!-- IB 2010-11-16 1.11.5Dev14 Have prepare for godaddy, thawte, and verisign signing be independent of each other.  Each must be used before "prepare" target is called.  -->
    <!-- IB 2010-11-16 1.11.5Dev14 Copy signed files to distsigned.  -->
    <!-- IB 2010-11-16 1.11.5Dev14 Have future internet install link version.  The full version has full in the name and is the default.  -->
    <!-- IB 2010-11-16 1.11.5Dev14 Have separate required and optional permissions.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Have full version name with internet install link.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Have signed versions of microemulator jars to allow demo applets.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Have code duplication target for PMD.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Have package, preverify, and obfusication done in one step.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Have all Blackberry versions begin with rim_.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Have all Blackberry versions of jar files.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Have no.jar.sign to skip creating jar signing.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Have no.rim.sign to skip creating rim cod signing.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Use Blackberry ant tools to sign cod file and create Blackberry target to create blackberry files.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Create Blackberry alx and zip with alx and cod.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Have microemu(version).sh to run microemulator demo of application version.  -->
    <!-- IB 2010-11-17 1.11.5Dev14 Stop creating preverified directory. -->
    <!-- IB 2010-11-17 1.11.5Dev14 Remove cso files. -->
    <!-- IB 2010-11-18 1.11.5Dev14 Have full version have seperate define name. -->
    <!-- IB 2010-11-18 1.11.5Dev14 Create presigned file for RIM signing in case failed signing to compare. -->
    <!-- IB 2010-11-18 1.11.5Dev14 Copy signed cod to distsigned. -->
    <!-- IB 2010-11-18 1.11.5Dev14 Move files and presereve the last modify date.  -->
    <!-- IB 2010-11-18 1.11.5Dev14 Use a special rim bin for intermediate RIM files.  -->
    <!-- IB 2010-11-18 1.11.5Dev14 Have special rim jad and jar file.  -->
    <!-- IB 2010-11-18 1.11.5Dev14 Save temp cod file from signing to bin with -tmp.cod.  -->
    <!-- IB 2010-11-27 1.11.5Dev15 Add signed, verisign and/or thawte to identify applet and regular emulator signing authorities.  -->
    <!-- IB 2011-01-14 1.11.5Alpha15 Use standard file prefix to allow internet link program to use it. -->
    <!-- IB 2011-01-14 1.11.5Alpha15 Have text to put signing authority name into description on project host. -->
    <!-- IB 2011-01-14 1.11.5Alpha15 Have prepare.test, prepare.release vs test.prepare, etc to be like other prepare... targets.  -->
    <!-- IB 2011-01-14 1.11.5Alpha15 Have microemu jars begin with signed- if jar is signed.  -->
    <!-- IB 2011-01-16 1.11.5Alpha15 Need to preserve class org.kablog.kgui.KFileSelectorMgr because it is loaded using forName and proguard does not preserve classes loaded like this. -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Make demo directory into signed-demo directory to move it to the bottom of an aphabetically sorted page.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Only copy demo directory to yinlight version.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Better information echoed.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Have property of the name of google, sourceforge and yinlight ftp build directories to use for finish sftp step.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Put index file sfuploads.htm into the google, sourceforge and yinlight ftp build directories in the finish sftp step.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Better removal/not copying of test src. -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Use jmunit plus source code for JMUnit testing. -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Allow jmunit plus to use the feature mgr when using jmunit code in the test compile vs the library. -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Change if/unless conditions for target/wtk antenna to be an expression which can evaluate to true.  This gives greater flexibility for use of these expressions (usually the value of one property). -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Have new target prepare.smallmem which is a dependency for MIDP 1.0 and the internet link version.  This reduces the code for these versions.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Have new target prepare.smartphone to set up smartphone properties.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Have new target prepare.intlink to set up internet link properties.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Have prepare target depend on prepare.full to make the full version the default.  This can be overridden by prepare.intlink.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Have one.target which if true does not do the prepare target more than once.  This is only useful when compiling/building one target.  It must be false for creating the release which executes multiple targets.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Have properties to allow compilation of just one file using the preprocessing of the previous files the same as before.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Allow specification of test.src.excludes test source exclude properties specified in release.properties.  -->
    <!-- IB 2011-01-17 1.11.5Alpha15 Use inheritAll to reduce dependencies on the "prepare" target.  -->
	<!-- IB 2011-01-14 1.11.5Alpha15 Have properties to show the preferred jar/jad based on current MIDP/JSR settings and the current jar/jad names for internet link/full code to display the text "current" if the preferred jar/jad name matches the current one.  In the future, the MIDP 2.0 version will download the preferred version on user request. -->
	<!-- IB 2011-01-14 1.11.5Alpha15 Have signed compile use verisign compile to help test preferred jad.  -->
	<!-- IB 2011-01-18 1.11.5Alpha15 Copy/put RIM jar file to ftp site.  -->
	<!-- IB 2011-01-18 1.11.5Alpha15 Put rim_ prefix on googlecode RIM files.  -->
	<!-- IB 2011-01-23 1.11.5Dev16 Have targets prepare.devopment/beta/alpha/production to make setting the properties for these stages easy. -->
	<!-- IB 2011-01-23 1.11.5Dev16 Separate out obfuscate from wtkpackage.  This allows Netebeans WTK home to obfuscate (hopefully).  Need wtkpreverify because wtkobfuscate does not preverify the result.  -->
	<!-- IB 2011-01-23 1.11.5Dev16 Need to preserve org.kablog.kgui.KFileSelectorMgr to allow loading with class.forName for optional JSR-75 code. -->
	<!-- IB 2011-01-23 1.11.5Dev16 Put file descriptions in a property to allow creation of more descriptive file index file. -->
	<!-- IB 2011-01-26 1.11.5Dev16 Put ftp device install files into device-install directory to get them to come up first in sourceforge.-->
	<!-- IB 2011-01-26 1.11.5Dev16 Have title and heading with version info in index file.  -->
	<!-- IB 2011-01-26 1.11.5Dev16 Build MIDP 2.0, CLDC 1.0, novice target. -->
	<!-- IB 2011-01-26 1.11.5Dev16 Use base URL for index file pointing to the version files directory.  This allows the file to work in any directory as everything is fully qualified.  -->
	<!-- IB 2011-01-26 1.11.5Dev16 Use -optimizationpasses to specify more than one (using 3 for this release) optimization passes. -->
	<!-- IB 2011-01-26 1.11.5Dev16 Use -allowaccessmodification allow ProGuard optimization to make some methods public to use inline or other optimizations.  -->
	<!-- IB 2011-01-27 1.11.5Dev16 Add novice compile target.  -->
	<!-- IB 2011-01-27 1.11.5Dev16 Remove parameter setting which prevents performing novice target.  -->
	<!-- IB 2011-01-27 1.11.5Dev16 Don't put novice binary into the distribution.  Only the source code will be present.  -->
	<!-- IB 2011-01-27 1.11.5Dev16 Fix location of novice.txt file.  -->
	<!-- IB 2011-01-28 1.11.5Dev17 For RIM, send zip file.  -->
	<!-- IB 2011-03-06 1.11.5Dev17 Have keep.smartlink to use smartlink for MIDP 1.0 and internet link.  -->
	<!-- IB 2011-03-06 1.11.5Dev17 Use enabled .value to use smartlink.  -->
	<!-- IB 2011-03-06 1.11.5Dev17 Have regularmem option for MIDP 1.0.  -->
	<!-- IB 2011-03-06 1.11.5Dev17 Prevent ${act.comp.src} directory from being created.  -->
	<!-- IB 2011-03-06 1.11.5Dev17 Don't preserve org.kablog.kgui.KFileSelectorMgr if it is not present.  This prevents errors.  -->
	<!-- IB 2011-03-06 1.11.5Dev17 Only upload RIM zip file as others are not usable.  -->
	<!-- IB 2011-03-06 1.11.5Dev17 Don't upload internet link version to google code.  -->
	<!-- IB 2011-03-06 1.11.5Dev17 Don't have signed MIDP 1.0 as it is not supported.  -->
	<!-- IB 2011-03-06 1.11.5Dev17 Add more targets to not make for dist.test.  -->
	<!-- IB 2011-03-06 1.11.5Dev17 Add more targets to not make for dist.smartphone.test.  -->
	<!-- IB 2011-03-07 1.11.5Dev17 Allow optional temporary distribution with temporary subdomain and directory path using wtktemporary.properties.template with yinlight.tmp.subdir, yinlight.tmp.subpath, and yinlight.subdomain.  -->
	<!-- IB 2011-03-07 1.11.5Dev17 Add MIDP 1.0 "regular" memory compile and build target which is skippped for distribution.  -->
	<!-- IB 2011-03-14 1.11.5Dev17 Fix removal of cod files.  -->
	<!-- IB 2011-03-18 1.11.5Dev17 Don't copy alx, jad, jar, and cod files to FTP or google.  Put them into zip file which in addition contains the alx file.  -->
	<!-- IB 2011-03-19 1.11.5Dev17 Prepare for future Afri-ware version.  -->
	<!-- IB 2011-03-21 1.11.5Dev17 Use stage.file instead of sstage.file for jad file properties.  -->
	<!-- IB 2011-03-21 1.11.5Dev17 Create a yinlight ftp in/htm and sourceforge ftp in/htm file for each target in the "bin" for that target.  -->
	<!-- IB 2011-03-25 1.11.5Dev18 Upload RIM zip first to google so that the jad/jar files appear last which is first in the download list.  -->

	<property environment="env" />
	<property name="sony.location" value="C:/SONYER~1/JavaME_SDK_CLDC/PC_Emulation/WTK2/" />

	<property name="device.props" value="" />
	<property name="build.template" value="" />
	<property name="beta.vers" value="" />
	<echo message="build.template=${build.template}" />
	<echo message="release.template=${release.template}" />
	<echo message="test.template=${test.template}" />
	<echo message="optional.template=${optional.template}" />
	<echo message="DLOGDEF=${DLOGDEF}" />
	<echo message="Preset presrc=${presrc}" />
	<property name="DEBUG" value="DEBUG" />
	<property name="target" value="../target" />
	<property name="tmpres" value="${target}/tmpres" />
	<property name="webtestdata" value="${target}/webtestdata" />
	<property name="filetestdata" value="${target}/filetestdata" />
	<property name="analyze" value="${target}/analyze" />
	<property name="dist.name" value="dist" />
	<property name="dist" value="${target}/${dist.name}" />
	<property name="distgooglecode.name" value="distgooglecode" />
	<property name="distgooglecode" value="${target}/${distgooglecode.name}" />
	<property name="distsourceforge.name" value="distsourceforge" />
	<property name="distsourceforge" value="${target}/${distsourceforge.name}" />
	<property name="ftpdist.name" value="ftpdist" />
	<property name="ftpdist.dir" value="${target}/${ftpdist.name}" />
	<property name="ftp.demo.dist.name" value="signed-demo" />
	<property name="ftp.demo.dist.dir" value="${ftpdist.dir}/${ftp.demo.dist.name}" />
	<property name="distsourceforge" value="${target}/distsourceforge" />
	<property name="sourceforge.ftp.in.file" value="${distsourceforge}/sfftpin" />
	<property name="sourceforge.ftp.index.file" value="${distsourceforge}/sfuploads.htm" />
	<property name="distyinlight.name" value="distyinlight" />
	<property name="distyinlight" value="${target}/${distyinlight.name}" />
	<property name="yinlight.ftp.in.file" value="${distyinlight}/ylftpin" />
	<property name="yinlight.ftp.index.file" value="${distyinlight}/yluploads.htm" />
	<property name="distproject-name" value="distproject" />
	<property name="distsigned" value="${target}/distsigned" />
	<property name="distproject" value="${target}/${distproject-name}" />
	<property name="distjardir" value="${distproject}/distjardir" />
	<property name="distall" value="${target}/distall" />
	<property name="main" value="${target}/main" />
	<property name="build" value="${target}/build" />
	<property name="classes" value="${target}/classes" />
	<property name="tmppreprocess" value="${target}/tmppreprocess" />
	<property name="tmppresrc" value="${target}/tmpprepresrc_file" />
	<property name="ext.drive" value="${env.EXT_DRIVE}" />
	<property name="sfile.prefix.cldc1.0" value="cldc10" />
	<property name="sfile.prefix.cldc1.1" value="cldc11" />
	<property name="sfile.prefix.full" value="full" />
	<property name="sfile.prefix.intlink" value="intlink" />
	<property name="sfile.prefix.smartphone" value="smartphone" />
	<property name="sfile.prefix.afriware" value="afriware" />
	<property name="sfile.prefix.regsize.midp10" value="moderate" />
	<property name="sfile.prefix.novice" value="novice" />
	<property name="sfile.prefix.jsr75" value="jsr75" />
	<property name="sfile.prefix.jsr82" value="jsr82" />
	<property name="sfile.prefix.jsr120" value="jsr120" />
	<property name="sfile.prefix.jsr135" value="jsr135" />
	<property name="sfile.prefix.jsr184" value="jsr184" />
	<property name="sfile.prefix.jsr205" value="jsr205" />
	<property name="sfile.prefix.jsr205" value="jsr205" />
	<property name="sfile.prefix.jsr238" value="jsr238" />
	<property name="sfile.prefix.large" value="large" />
	<property name="sfile.prefix.midp1.0" value="midp10" />
	<property name="sfile.prefix.midp2.0" value="midp20" />
	<property name="sfile.prefix.signed" value="signed" />
	<property name="sfile.prefix.thawte" value="thawte" />
	<property name="sfile.prefix.verisign" value="verisign" />
	<property name="sfile.prefix.godaddy" value="godaddy" />
	<property file="${basedir}/wtk-build${device.props}.properties${build.template}" />
	<echo message="java.home=${java.home}" />
	<echo message="JAVA_HOME=${env.JAVA_HOME}" />
	<property name="MIDLETVERS" value="${MIDLETVERSROOT}" />
	<echo message="MIDLETVERS=${MIDLETVERS}" />
	<!-- DCOMPATDEF is used to test compatibility store/restore of date -->
	<property name="DCOMPATDEF" value="DNOCOMPAT" />
	<property name="DJMUNITDEF" value="DNOJMUNIT" />
	<echo message="unproc.src=${unproc.src}" />
	<fail message="Must set comp.src to src directory to put the source to compile." unless="comp.src" />

	<!-- Define the tasks. -->

	<!-- clean up the project -->
	<target name="clean" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75">
		<echo message="deleting ${target}" />
		<delete dir="${target}" />
		<antcall target="clean.version" inheritAll="true" />
	</target>

	<!-- clean up the compile -->
	<target name="clean.compile">
		<delete dir="${classes}" />
	</target>

	<!-- TODO -->
	<target name="clean.version">
		<delete dir="${classes}" />
	</target>

	<target name="prepare.test" unless="${no.test}" >
	    <echo message="Using test properties" />
		<property name="no.staging" value="true" />
		<property name="no.release" value="true" />
	    <echo message="no.release=${no.release}" />
		<property name="test.template" value="" />
		<property file="${basedir}/test.properties${test.template}" />
		<antcall target="test.buildno" />
		<property file="${basedir}/test_buildinfo.properties${test.template}" />
	    <echo message="build.number=${build.number}" />
	</target>

	<target name="test.buildno" unless="test.buildinfo" >
	    <echo message="Using test properties" />
	    <echo message="no.release=${no.release}" />
		<buildnumber file="${basedir}/test_buildinfo.properties${test.template}" />
	    <echo message="Release buildinfo update." />
		<property name="test.buildno" value="true" />
	</target>

	<target name="prepare.release" unless="${no.release}" >
	    <echo message="Using release properties" />
		<property name="no.test" value="true" />
		<property name="no.staging" value="true" />
		<property name="release.template" value="" />
		<property file="${basedir}/release.properties${release.template}" />
	    <echo message="RELEASE=${RELEASE}" />
	    <echo message="build.number=${build.number}" />
		<antcall target="release.buildno" />
		<property file="${basedir}/release_buildinfo.properties${release.template}" />
	    <echo message="build.number=${build.number}" />
	</target>

	<target name="release.buildno" unless="release.buildno" >
		<buildnumber file="${basedir}/release_buildinfo.properties${release.template}" />
	    <echo message="Release buildinfo update." />
		<property name="release.buildno" value="true" />
	</target>

	<target name="prepare.staging" unless="${no.staging}" >
	    <echo message="Using release staging properties" />
		<property name="no.test" value="true" />
		<property name="no.release" value="true" />
		<property name="staging.template" value="" />
		<property file="${basedir}/staging.properties${staging.template}" />
	</target>

	<target name="prepare.temporary" if="${temp}" >
	    <echo message="Using prepare.temporary." />
		<property file="${basedir}/wtktemporary.properties${build.template}" />
	    <echo message="yinlight.tmp.subdir=${yinlight.tmp.subdir}" />
	    <echo message="yinlight.tmp.subpath=${yinlight.tmp.subpath}" />
	    <echo message="yinlight.subdomain=${yinlight.subdomain}" />
	</target>

	<target name="prepare.development" if="${dev}" >
	    <echo message="Using prepare.development." />
		<property file="${basedir}/wtkdevelopment.properties${build.template}" />
	</target>

	<target name="prepare.beta" if="${beta}" >
		<property file="${basedir}/wtkbeta.properties${build.template}" />
	</target>

	<target name="prepare.rc" if="${rc}" >
		<property file="${basedir}/wtkrc.properties${build.template}" />
	</target>

	<target name="prepare.production" if="${production}" >
		<property file="${basedir}/wtkproduction.properties${build.template}" />
	</target>

	<target name="prepare.smallmem" >
		<property file="${basedir}/wtksmallmem.properties${build.template}" />
	</target>

	<target name="prepare.regularmem" >
		<property file="${basedir}/wtkregularmem.properties${build.template}" />
	</target>

	<target name="prepare.midp1.0" depends="prepare.smallmem" >
		<property file="${basedir}/wtkmidp1.0.properties${build.template}" />
	</target>

	<target name="prepare.midp2.0" >
		<property file="${basedir}/wtkmidp2.0.properties${build.template}" />
	</target>

	<target name="prepare.cldc1.0" >
		<property file="${basedir}/wtkcldc1.0.properties${build.template}" />
	</target>

	<target name="prepare.cldc1.1" >
		<property file="${basedir}/wtkcldc1.1.properties${build.template}" />
	</target>

	<target name="prepare.jsr75" >
		<property file="${basedir}/wtkjsr75.properties${build.template}" />
	</target>

	<target name="prepare.smartphone" >
		<property file="${basedir}/wtksmartphone.properties${build.template}" />
	</target>

	<target name="prepare.afriware" >
		<property file="${basedir}/wtkafriware.properties${build.template}" />
	</target>

	<target name="prepare.signed" >
		<property file="${basedir}/wtksigned.properties${build.template}" />
		<property name="vendor" value="${yinlight.vendor}" />
		<property name="project.info.url" value="${yinlight.project.info.url}" />
	</target>

	<target name="prepare.novice" >
		<property file="${basedir}/wtknovice.properties${build.template}" />
	</target>

	<target name="prepare.jsr238" >
		<property file="${basedir}/wtkjsr238.properties${build.template}" />
	</target>

	<target name="prepare.verisign">
		<property file="${basedir}/wtkverisign.properties${build.template}" />
		<property name="tsalias" value="${env.VERISIGN_ALIAS}" />
		<property name="tsstorepass" value="${env.VERISIGN_KEYSTORE_PASS}" />
		<property name="tskeystore" value="${env.VERISIGN_KEYSTORE_LOCATION}/${env.VERISIGN_KEYSTORE_NAME}" />
		<property name="tskeypass" value="${env.VERISIGN_KEYSTORE_PASS}" />
	</target>

	<target name="prepare.thawte">
		<property file="${basedir}/wtkthawte.properties${build.template}" />
		<property name="tsalias" value="${env.THAWTE_ALIAS}" />
		<property name="tsstorepass" value="${env.THAWTE_KEYSTORE_PASS}" />
		<property name="tskeystore" value="${env.THAWTE_KEYSTORE_LOCATION}/${env.THAWTE_KEYSTORE_NAME}" />
		<property name="tskeypass" value="${env.THAWTE_KEYSTORE_PASS}" />
	</target>

	<target name="prepare.godaddy">
		<property file="${basedir}/wtkgodaddy.properties${build.template}" />
		<property name="tsalias" value="${env.GODADDY_ALIAS}" />
		<property name="tsstorepass" value="${env.GODADDY_KEYSTORE_PASS}" />
		<property name="tskeystore" value="${env.GODADDY_KEYSTORE_LOCATION}/${env.GODADDY_KEYSTORE_NAME}" />
		<property name="tskeypass" value="${env.GODADDY_KEYSTORE_PASS}" />
	</target>

	<!-- Prepare the distribution stage (e.g. beta1) -->
	<target name="prepare.stage" if="stage" >
	    <echo message="Using distribution stage=${stage}" />
		<property name="sstage.file" value="${stage}" />
		<property name="stage.file" value="${stage}_" />
		<echo message="stage.file=${stage.file}" />
		<property name="dist.stage.file" value="_${stage}" />
		<echo message="dist.stage.file=${dist.stage.file}" />
		<echo message="ustage=${ustage}" />
		<property name="ustage.txt" value="${ustage} " />
		<echo message="ustage.txt=${ustage.txt}" />
		<property name="stage.featured" value="Featured," />
		<property name="ftp.ustage.url.txt" value="${ustage}%20" />
		<property name="ftp.ustage.desc.txt" value="${ustage} " />
		<property name="ftp.ustage.txt" value="${ustage}\ " />
		<echo message="ftp.ustage.txt=${ftp.ustage.txt}" />
		<property name="no.individual.file" value="false" />
	    <echo message="no.individual.file=${no.individual.file}" />
	</target>

	<!-- Prepare the full version of the program. -->
	<target name="prepare.full" unless="${make.link}" >
	    <echo message="Creating full version" />
		<property file="${basedir}/wtkfull.properties${build.template}" />
	</target>

	<!-- Prepare the internet install link version of the program. -->
	<target name="prepare.intlink"  depends="prepare.smallmem" >
	    <echo message="Creating internet install link" />
		<property file="${basedir}/wtkintlink.properties${build.template}" />
	</target>

	<!-- Prepare to init stage properties if not set already.  -->
	<target name="prepare.no.stage" unless="stage" >
		<property name="stage" value="" />
	    <echo message="Using distribution no stage=${stage}" />
		<property name="stage.file" value="" />
		<echo message="stage.file=${stage.file}" />
		<property name="dist.stage.file" value="" />
		<echo message="dist.stage.file=${dist.stage.file}" />
		<property name="ustage" value="" />
		<echo message="ustage=${ustage}" />
		<property name="ustage.txt" value="" />
		<echo message="ustage.txt=${ustage.txt}" />
		<property name="stage.featured" value="Featured," />
		<property name="ftp.ustage.url.txt" value="" />
		<property name="ftp.ustage.desc.txt" value="" />
		<property name="ftp.ustage.txt" value="" />
		<echo message="ftp.ustage.txt=${ftp.ustage.txt}" />
		<property name="no.individual.file" value="false" />
	    <echo message="no.individual.file=${no.individual.file}" />
	</target>

	<!-- prepare the target folder -->
	<target name="prepare" depends="prepare.test,prepare.release,prepare.stage,prepare.no.stage,prepare.full" >
		<!-- Define the Wireless Toolkit home directory. Needed by the tasks. -->
		<!-- Define some additional properties for this project. Not required. -->
		<property name="optional.template" value="" />
		<property file="${basedir}/optional.properties${optional.template}" />
		<property name="propdir" value="${basedir}" />
		<property name="tmp.presrc.mdir" value="${tmppresrc}${presrc.mdir}" />
		<echo message="tmp.presrc.mdir=${tmp.presrc.mdir}" />
		<property name="tmp.presrc.subdir" value="${tmppresrc}${presrc.dir}" />
		<echo message="tmp.presrc.subdir=${tmp.presrc.subdir}" />
		<property name="res.includes" value="**/unread.png,**/rss.png" />
		<property name="one.target" value="false" />
		<property name="novice" value="false" />
		<property name="signed" value="false" />

		<property name="PERMISSIONS_REQ.midp1.0" value="" />
		<property name="PERMISSIONS_OPT.midp1.0" value="" />
		<property name="PERMISSIONS_REQ.midp2.0" value="" />
		<property name="PERMISSIONS_OPT.midp2.0" value="" />
		<property name="PERMISSIONS_REQ.jsr75" value="" />
		<property name="PERMISSIONS_OPT.jsr75" value="" />
		<property name="PERMISSIONS_REQ.jsr238" value="" />
		<property name="PERMISSIONS_OPT.jsr238" value="" />
		<property name="PERMISSIONS_REQ" value="${PERMISSIONS_REQ.midp1.0}${PERMISSIONS_REQ.midp2.0}${PERMISSIONS_REQ.jsr75}${PERMISSIONS_REQ.jsr238}" />
		<property name="PERMISSIONS_OPT" value="${PERMISSIONS_OPT.midp1.0}${PERMISSIONS_OPT.midp2.0}${PERMISSIONS_OPT.jsr75}${PERMISSIONS_OPT.jsr238}" />
		<property name="DMEMSIZEDEF" value="DREGULARMEM" />
		<property name="DITUNESDEF" value="DNOITUNES" />
		<property name="DSMARTPHONEDEF" value="DNOSMARTPHONE" />
		<property name="DAFRIWAREDEF" value="DNOAFRIWARE" />
		<property name="DNOVICEDEF" value="DNONOVICE" />
		<property name="DINTLINKDEF" value="DNOINTLINK" />
		<property name="DFULLVERSDEF" value="DNODFULLVERS" />
		<property name="DSIGNEDDEF" value="DNOSIGNED" />
		<property name="DGODADDYDEF" value="DNOGODADDY" />
		<property name="DVERISIGNDEF" value="DNOVERISIGN" />
		<property name="DTHAWTEDEF" value="DNOTHAWTE" />
		<property name="DJSR75" value="DNOJSR75" />
		<property name="DJSR238" value="DNOJSR238" />
		<property name="DJMTESTDEF" value="DNOJMTEST" />
		<property name="DJMTESTPLUSDEF" value="DNOJMTESTPLUS" />
		<property name="DJMTESTFREEDEF" value="DNOJMTESTFREE" />
		<property name="nojsr75.res.excludes" value="**/file_icon.png,**/folder.png,**/up_dir_icon.png,**/folder_icon.png" />
		<property name="wtk.optionalpda.enabled.value" value="false" />
		<property name="wtk.bluetooth.enabled.value" value="false" />
		<property name="wtk.wma.enabled.value" value="false" />
		<property name="wtk.mmapi.enabled.value" value="false" />
		<property name="wtk.miapi.enabled.value" value="false" />
		<property name="wtk.java3d.enabled.value" value="false" />
		<property name="wtk.wma2.enabled.value" value="false" />
		<property name="wtk.contenthandler.enabled.value" value="false" />
		<property name="file.nbr.midp1.0" value="" />
		<property name="file.nbr.midp2.0" value="" />
		<property name="file.nbr.midp" value="${file.nbr.midp1.0}${file.nbr.midp2.0}" />
		<property name="file.nbr.cldc1.0" value="" />
		<property name="file.nbr.cldc1.1" value="" />
		<property name="file.nbr.cldc" value="${file.nbr.cldc1.0}${file.nbr.cldc1.1}" />
		<property name="file.prefix.midp1.0" value="" />
		<property name="file.prefix.midp2.0" value="" />
		<property name="file.prefix.cldc1.0" value="" />
		<property name="file.prefix.cldc1.1" value="" />
		<property name="file.prefix.novice" value="" />
		<property name="file.prefix.smartphone" value="" />
		<property name="file.prefix.afriware" value="" />
		<property name="file.prefix.memorysize" value="" />
		<property name="file.prefix.full" value="" />
		<property name="file.prefix.intlink" value="" />
		<property name="file.prefix.signed" value="" />
		<property name="microemu.prefix.signed" value="" />
		<property name="file.prefix.verisign" value="" />
		<property name="file.prefix.thawte" value="" />
		<property name="file.prefix.godaddy" value="" />
		<property name="file.prefix.jsr75" value="" />
		<property name="file.prefix.jsr82" value="" />
		<property name="file.prefix.jsr120" value="" />
		<property name="file.prefix.jsr135" value="" />
		<property name="file.prefix.jsr184" value="" />
		<property name="file.prefix.jsr205" value="" />
		<property name="file.prefix.jsr238" value="" />
		<property name="file.prefix.large" value="" />
		<property name="html.file.prefix" value="${file.prefix.smartphone}${file.prefix.afriware}${file.prefix.memorysize}${file.prefix.full}${file.prefix.intlink}${file.prefix.signed}${file.prefix.verisign}${file.prefix.thawte}${file.prefix.godaddy}${file.prefix.jsr75}${file.prefix.jsr238}" />
		<property name="file.prefix" value="${file.prefix.midp1.0}${file.prefix.midp2.0}${file.prefix.cldc1.0}${file.prefix.cldc1.1}${file.prefix.novice}${file.prefix.large}${html.file.prefix}" />
		<property name="bin" value="${target}/bin${file.prefix}" />
		<property name="rim.bin" value="${target}/bin${file.prefix}_rim" />
		<property name="rim.bin.alx" value="${target}/bin${file.prefix}_rim_alx" />
		<property name="build.vers" value="${target}/build_${file.prefix}" />
		<property name="dist.vers" value="${target}/dist_${file.prefix}" />
		<property name="SUFFIXVERS.midp1.0" value="" />
		<property name="SUFFIXVERS.midp2.0" value="" />
		<property name="SUFFIXVERS.cldc1.0" value="" />
		<property name="SUFFIXVERS.cldc1.1" value="" />
		<property name="SUFFIXVERS.novice" value="" />
		<property name="SUFFIXVERS.smartphone" value="" />
		<property name="SUFFIXVERS.afriware" value="" />
		<property name="SUFFIXVERS.memorysize" value="" />
		<property name="SUFFIXVERS.full" value="" />
		<property name="SUFFIXVERS.intlink" value="" />
		<property name="SUFFIXVERS.signed" value="" />
		<property name="SUFFIXVERS.verisign" value="" />
		<property name="SUFFIXVERS.thawte" value="" />
		<property name="SUFFIXVERS.godaddy" value="" />
		<property name="SUFFIXVERS.jsr75" value="" />
		<property name="SUFFIXVERS.jsr82" value="" />
		<property name="SUFFIXVERS.jsr120" value="" />
		<property name="SUFFIXVERS.jsr135" value="" />
		<property name="SUFFIXVERS.jsr184" value="" />
		<property name="SUFFIXVERS.jsr238" value="" />
		<property name="SUFFIXVERS.large" value="" />
		<property name="SUFFIXVERS" value="${SUFFIXVERS.midp1.0}${SUFFIXVERS.midp2.0}${SUFFIXVERS.cldc1.0}${SUFFIXVERS.cldc1.1}${SUFFIXVERS.novice}${SUFFIXVERS.smartphone}${SUFFIXVERS.afriware}${SUFFIXVERS.memorysize}${SUFFIXVERS.full}${SUFFIXVERS.intlink}${SUFFIXVERS.signed}${SUFFIXVERS.verisign}${SUFFIXVERS.thawte}${SUFFIXVERS.godaddy}${SUFFIXVERS.jsr75}${SUFFIXVERS.jsr82}${SUFFIXVERS.jsr120}${SUFFIXVERS.jsr135}${SUFFIXVERS.jsr184}${SUFFIXVERS.jsr238}${SUFFIXVERS.large}" />
		<property name="lib.jsr75" value="" />
		<property name="lib.jsr82" value="" />
		<property name="lib.jsr120" value="" />
		<property name="lib.jsr135" value="" />
		<property name="lib.jsr184" value="" />
		<property name="lib.jsr238" value="" />
		<property name="lib.classpath" value="${wtk.home}/lib/midpapi${file.nbr.midp}.jar:${wtk.home}/lib/cldcapi${file.nbr.cldc}.jar${lib.jsr75}${lib.jsr82}${lib.jsr120}${lib.jsr135}${lib.jsr184}${lib.jsr238}" />
		<property name="DFEATUREFORMDEF" value="DNOFEATUREFORM" />
		<property name="DFEATUREFORMIMPORTDEF" value="" />
		<property name="DFEATUREMGRDEF" value="DNOFEATUREMGR" />
		<property name="DFEATUREMGRIMPORTDEF" value="" />
		<!-- DCOMPATDEF is used to test compatibility store/restore of date -->
		<property name="DCOMPATDEF" value="DNOCOMPAT" />
		<!-- Note:  this value will not be used if novice is set before -->
		<!-- we get here (e.g. in target dist.midp.2.0.novice).  For the -->
		<!-- other targets, NOVICE will be false and therefore disabled -->
		<property name="NOVICE" value="false" />
		<property name="novice.txt" value="${src}/data/novice.txt" />
		<property name="jsr75" value="" />
		<property name="smartphone" value="" />
		<property name="afriware" value="" />
		<property name="stage.stable.text" value="stable" />
		<property name="stage.phase.text" value="production" />
		<property name="signed.text" value="" />
		<property name="verisign.text" value="" />
		<property name="thawte.text" value="" />
		<property name="godaddy.text" value="" />
		<property name="vendor" value="${original.vendor}" />
		<property name="project.info.url" value="${original.project.info.url}" />
		<property name="build.prefix" value="${file.prefix}${stage.file}" />
		<property name="build.file.root" value="${build.prefix}${release.name}-${FMIDLETVERSROOT}" />
		<property name="rim.build.file.root" value="rim_${build.file.root}" />
		<property name="buildinfo" value="${SUFFIXVERS}-${stage.file}b${build.number}" />
		<!-- changed -->
		<mkdir dir="${target}" />
		<mkdir dir="${classes}" />
		<property name="EMULATOR" value="true" />
		<property name="svnexport" value="${build}/svnexport" />
		<property name="compiled" value="${build}/${build.prefix}pcompiled" />
		<property name="preverified" value="${build}/${build.prefix}preverified" />
		<property name="preprocessed" value="${build}/${build.prefix}preprocessed" />
		<filterset id="defile.filter" >
			<filter token="DMIDPVERS" value="//#define ${DMIDPVERS}" />
			<filter token="DCLDCVERS" value="//#define ${DCLDCVERS}" />
			<filter token="DFEATUREFORMDEF" value="//#define ${DFEATUREFORMDEF}" />
			<filter token="DFEATUREFORMIMPORTDEF" value="${DFEATUREFORMIMPORTDEF}" />
			<filter token="DFEATUREMGRDEF" value="//#define ${DFEATUREMGRDEF}" />
			<filter token="DFEATUREMGRIMPORTDEF" value="${DFEATUREMGRIMPORTDEF}" />
			<filter token="DMEMSIZEDEF" value="//#define ${DMEMSIZEDEF}" />
			<filter token="DITUNESDEF" value="//#define ${DITUNESDEF}" />
			<filter token="DSMARTPHONEDEF" value="//#define ${DSMARTPHONEDEF}" />
			<filter token="DAFRIWAREDEF" value="//#define ${DAFRIWAREDEF}" />
			<filter token="DNOVICEDEF" value="//#define ${DNOVICEDEF}" />
			<filter token="SFILEPREFIXNOVICE" value="${sfile.prefix.novice}" />
			<filter token="DINTLINKDEF" value="//#define ${DINTLINKDEF}" />
			<filter token="DFULLVERSDEF" value="//#define ${DFULLVERSDEF}" />
			<filter token="DSIGNEDDEF" value="//#define ${DSIGNEDDEF}" />
			<filter token="DVERISIGNDEF" value="//#define ${DVERISIGNDEF}" />
			<filter token="DTHAWTEDEF" value="//#define ${DTHAWTEDEF}" />
			<filter token="DGODADDYDEF" value="//#define ${DGODADDYDEF}" />
			<filter token="DJSR75" value="//#define ${DJSR75}" />
			<filter token="DJSR238" value="//#define ${DJSR238}" />
			<filter token="DTESTDEF" value="//#define ${DTESTDEF}" />
			<filter token="DJMTESTDEF" value="//#define ${DJMTESTDEF}" />
			<filter token="DJMTESTPLUSDEF" value="//#define ${DJMTESTPLUSDEF}" />
			<filter token="DJMTESTFREEDEF" value="//#define ${DJMTESTFREEDEF}" />
			<filter token="DCOMPATDEF" value="//#define ${DCOMPATDEF}" />
			<filter token="DTESTUIDEF" value="//#define ${DTESTUIDEF}" />
			<filter token="DLOGDEF" value="//#define ${DLOGDEF}" />
			<filter token="PROGVERS" value="${buildinfo}" />
		</filterset>
		<filterset id="midlet.info" >
			<filter token="MIDPVERS" value="${wtk.midp.version}" />
			<filter token="CLDCVERS" value="${wtk.cldc.version}" />
			<filter token="MIDLETVERS" value="${MIDLETVERS}" />
			<filter token="PROGVERS" value="${buildinfo}" />
			<filter token="JMIDPVERS" value="${JMIDPVERS}" />
			<filter token="JCLDCVERS" value="${JCLDCVERS}" />
			<filter token="MIDLETCLASS" value="${midlet.class}" />
			<filter token="FNROOTEMULATORVERSION" value="${fn.root.emulator.version}" />
			<filter token="EMULATOR" value="${EMULATOR}" />
			<filter token="NOVICE" value="${NOVICE}" />
		</filterset>

	</target>

    <echo message="antenna location='${antenna.home}/${antenna.jar}'" />
	<taskdef resource="antenna.properties" >
	  <classpath>
		<pathelement location="${antenna.home}/${antenna.jar}" />
	  </classpath>
	</taskdef>

    <echo message="bb ant tools location='${bb.ant.tools.home}/${bb.ant.tools.jar}'" />
	<taskdef resource="bb-ant-defs.xml" >
	  <classpath>
		<pathelement location="${bb.ant.tools.home}/${bb.ant.tools.jar}" />
	  </classpath>
	</taskdef>

	<taskdef resource="proguard/ant/task.properties"
         classpath="${wtk.proguard.home}/lib/proguard.jar" />

    <taskdef resource="net/sf/antcontrib/antcontrib.properties">
      <classpath>
        <pathelement location="${antcontrib.home}/ant-contrib-1.0b3.jar"/>
      </classpath>
    </taskdef>

	<!--
	<taskdef resource="svntask.properties" >
	  <classpath>
		<pathelement location="${svnant.home}/svnant.jar" />
		<pathelement location="${svnant.home}/svnClientAdapter.jar" />
	  </classpath>
	</taskdef>
	-->

	<!--
	<taskdef resource="com/idaremedia/svn4ant/client/antlib.xml" >
	  <classpath>
		<pathelement location="${svnant.home}/dependencies/antx/lib/AntX_tasks.jar" />
		<pathelement location="${svnant.home}/dependencies/antx/lib/JWare_apis.jar" />
		<pathelement location="${svnant.home}/dependencies/antx/src.jar" />
		<pathelement location="${svnant.home}/dependencies/javasvn/lib/ganymed.jar" />
		<pathelement location="${svnant.home}/dependencies/javasvn/lib/svnkit-cli.jar" />
		<pathelement location="${svnant.home}/dependencies/javasvn/lib/svnkit.jar" />
	  </classpath>
	</taskdef>
	-->

	<target name="display.props" unless="${show.once}" >
		<property name="show.once" value="${one.target}" />
	    <echo message="project.name=${project.name}" />
	    <echo message="wtk.home=${wtk.home}" />
	    <echo message="jar.jde.home=${jar.jde.home}" />
	    <echo message="bb.jde.home=${bb.jde.home}" />
	    <echo message="rim.home=${rim.home}" />
	    <echo message="PWD=${env.PWD}" />
	    <echo message="lib.classpath=${lib.classpath}" />
	    <echo message="build.compiler=${build.compiler}" />
	    <echo message="src=${src}" />
	    <echo message="presrc=${presrc}" />
	    <echo message="presrc.file=${presrc.file}" />
	    <echo message="jar.presrc=${jar.presrc}" />
	    <echo message="compat.presrc=${compat.presrc}" />
	    <echo message="testui.presrc=${testui.presrc}" />
	    <echo message="build.number=${build.number}" />
	    <echo message="file.prefix=${file.prefix}" />
	    <echo message="build.prefix=${build.prefix}" />
	    <echo message="need.res=${need.res}" />
	    <echo message="keep.obfuscate=${keep.obfuscate}" />
	    <echo message="novice=${novice}" />
	    <echo message="novice.txt=${novice.txt}" />
	    <echo message="NOVICE=${NOVICE}" />
	    <echo message="DMIDPVERS=${DMIDPVERS}" />
	    <echo message="DCLDCVERS=${DCLDCVERS}" />
	    <echo message="DITUNESDEF=${DITUNESDEF}" />
	    <echo message="DSMARTPHONEDEF=${DSMARTPHONEDEF}" />
	    <echo message="DAFRIWAREDEF=${DAFRIWAREDEF}" />
	    <echo message="DNOVICEDEF=${DNOVICEDEF}" />
	    <echo message="DINTLINKDEF=${DINTLINKDEF}" />
	    <echo message="DFULLVERSDEF=${DFULLVERSDEF}" />
	    <echo message="DSIGNEDDEF=${DSIGNEDDEF}" />
	    <echo message="DMEMSIZEDEF=${DMEMSIZEDEF}" />
	    <echo message="DFEATUREFORMDEF=${DFEATUREFORMDEF}" />
	    <echo message="DFEATUREFORMIMPORTDEF=${DFEATUREFORMIMPORTDEF}" />
	    <echo message="DJSR75=${DJSR75}" />
	    <echo message="DJSR238=${DJSR238}" />
	    <echo message="DTESTDEF=${DTESTDEF}" />
	    <echo message="DJMTESTDEF=${DJMTESTDEF}" />
	    <echo message="DJMTESTPLUSDEF=${DJMTESTPLUSDEF}" />
	    <echo message="DJMTESTFREEDEF=${DJMTESTFREEDEF}" />
	    <echo message="DTESTUIDEF=${DTESTUIDEF}" />
	    <echo message="DCOMPATDEF=${DCOMPATDEF}" />
	    <echo message="wtk.optionalpda.enabled.value=${wtk.optionalpda.enabled.value}" />
	    <echo message="DLOGDEF=${DLOGDEF}" />
	    <echo message="no.test=${no.test}" />
	    <echo message="no.staging=${no.staging}" />
	    <echo message="no.release=${no.release}" />
	    <echo message="need.test.res=${need.test.res}" />
	    <echo message="MIDLETURL_ROOT=${MIDLETURL_ROOT}" />
	    <echo message="separator=${separator}" />
	</target>

	<target name="init.preprocess" depends="prepare" unless="presrc.file" >
		<!-- Delete directory to compile so that we start fresh for cases -->
		<!-- when we delete a file. -->
		<property name="act.comp.src" value="${comp.src}" />
		<delete dir="${act.comp.src}" />
		<mkdir dir="${act.comp.src}" />
		<!-- Copy unpreprocessed source to compiled src dir -->
		<antcall target="copy.unproc.comp" inheritAll="true" />
		<delete dir="${tmppreprocess}" />
		<mkdir dir="${tmppreprocess}" />
	</target>

	<target name="init.act.presrc" depends="prepare" if="presrc.file" >
		<property name="copy.all.once" value="true" />
		<property name="act.presrc" value="${tmp.presrc.mdir}" />
		<property name="act.comp.src" value="${comp.src.file}" />
		<delete dir="${act.comp.src}" />
		<mkdir dir="${act.comp.src}" />
	</target>

	<target name="init.preprocess.presrc.file" depends="prepare" if="presrc.file" >
		<delete dir="${tmp.presrc.mdir}" />
		<mkdir dir="${tmp.presrc.subdir}" />
		<copy file="${presrc.file}" todir="${tmp.presrc.subdir}" />
	</target>

	<!-- Preprocess source using antenna preprocessor.  If preproccess -->
	<!-- is not used, this copies the src to the directory to compile -->
	<!-- comp.src. -->
	<target name="preprocess" depends="init.act.presrc,init.preprocess.presrc.file,init.preprocess" if="presrc" >
		<antcall target="display.props" inheritAll="true" />
		<!-- Check with defines in jdk.home rapc. -->
		<property name="preprocess.defines" value="DEBUG=WARN,${DMIDPVERS},${DCLDCVERS},${DMEMSIZEDEF},${DITUNESDEF},${DSMARTPHONEDEF},${DAFRIWAREDEF},${DNOVICEDEF},${DFEATUREMGRDEF},${DFEATUREFORMDEF},${DINTLINKDEF},${DFULLVERSDEF},${DSIGNEDDEF},${DVERISIGNDEF},${DTHAWTEDEF},${DGODADDYDEF},${DJSR75},${DJSR238},${DTESTDEF},${DJMTESTDEF},${DJMTESTPLUSDEF},${DJMTESTFREEDEF},${DLOGDEF},${DTESTUIDEF},${DCOMPATDEF}" />
		<echo message="preprocess.defines=${preprocess.defines}" />
		<property name="act.presrc" value="${presrc}" />
		<echo message="act.presrc=${act.presrc}" />
		<property name="act.comp.src" value="${comp.src}" />
		<echo message="act.comp.src=${act.comp.src}" />
		<wtkpreprocess srcdir="${act.presrc}" destdir="${tmppreprocess}" encoding="${wtk.encoding}" symbols="${preprocess.defines}" printsymbols="yes" />
		<echo message="Preprocess JMUnit pre src if set ${jmunit.src}." />
		<wtkpreprocess srcdir="${jmunit.src}" destdir="${tmppreprocess}" encoding="${wtk.encoding}" symbols="${preprocess.defines}" printsymbols="true" if="jmunit.src"  unless="presrc.file" />
		<echo message="Preprocess test UI if set ${testui.presrc}." />
		<wtkpreprocess srcdir="${testui.presrc}" destdir="${tmppreprocess}" encoding="${wtk.encoding}" symbols="${preprocess.defines}" printsymbols="true" if="testui.presrc"  unless="presrc.file" />
		<echo message="Preprocess compatiblity code if set ${compat.presrc}." />
		<wtkpreprocess srcdir="${compat.presrc}" destdir="${tmppreprocess}" encoding="${wtk.encoding}" symbols="${preprocess.defines}" if="compat.presrc"  unless="presrc.file" />
		<echo message="Preprocess jar src if set ${jar.presrc}." />
		<wtkpreprocess srcdir="${jar.presrc}" destdir="${tmppreprocess}" encoding="${wtk.encoding}" symbols="${preprocess.defines}" if="jar.presrc"  unless="presrc.file" />
		<copy todir="${act.comp.src}" overwrite="true" >
			<fileset dir="${tmppreprocess}" includes="**/*.java" />
			<filterset refid="defile.filter" />
		</copy>
		<antcall target="delete.test.src" inheritAll="true" >
			<param name="dsrc" value="${act.comp.src}" />
		</antcall>
		<antcall target="zip.src" inheritAll="true" />
	</target>

	<!-- Copy preprocessed src to unprocessed source to allow the -->
	<!-- src to be checked in or compiled with Netbeans -->
	<target name="copy.comp.src" depends="prepare" if="unproc.src" >
		<copy todir="${src}" overwrite="true" >
			<!-- remove compatibility classes as these are kept in compatsrc -->
			<!-- remove testui classes as these are kept in testui -->
			<fileset dir="${comp.src}" includes="**/*.java" excludes="${test.src.excludes}" />
		</copy>
		<antcall target="delete.test.src" inheritAll="true" >
			<param name="dsrc" value="${src}" />
		</antcall>
	</target>

	<!-- Delete preprocessed test src in src -->
	<target name="delete.test.src" if="${no.test}">
		<echo message="Deleting test src ${dsrc}." />
		<delete includeemptydirs="true" failonerror="false" >
			<!-- remove testui classes as these are kept in testui -->
			<fileset dir="${dsrc}" includes="**/Compatibility*,**/testutil/**,**/testlcdui/*.java" />
			<fileset dir="${dsrc}/net/sf" />
		</delete>
	</target>

	<target name="copy.unproc.comp" if="unproc.src" >
		<copy todir="${comp.src}" overwrite="true" >
			<fileset dir="${unproc.src}" includes="**/*.java" />
		</copy>
	</target>

	<target name="copy.comp.svn" depends="prepare" if="copy.comp.svn" >
		<copy todir="${src}" overwrite="true" >
			<fileset dir="${comp.src}" excludes="${test.src.excludes}" />
		</copy>
	</target>

	<target name="wtk.src.copy" if="wtk.src" unless="presrc.file" >
		<delete includeEmptyDirs="true" >
			<fileset dir="${wtk.src}" includes="**/*.java" />
		</delete>
		<copy todir="${wtk.src}" >
			<fileset dir="${comp.src}" includes="**/*.java" />
		</copy>
	</target>

	<target name="wtk.src.copy.file" if="presrc.file" >
		<copy file="${comp.src.file}/${src.dir}/${presrc.file.base}" todir="${wtk.src}/${src.dir}" overwrite="true" />
	</target>

	<target name="zip.src" unless="presrc.file" >
		<delete file="${zipdir}/${build.prefix}src.zip" />
		<zip destfile="${zipdir}/${build.prefix}src.zip" basedir="${comp.src}" />
	</target>

	<path id="project.classpath">
		<pathelement location="lib/JLogMicro.jar" />
	</path>

	<path id="jde.classpath">
		<pathelement location="${jde.home.path}/bin/rapc.jar" />
	</path>

	<target name="compile" depends="prepare,init.act.presrc,preprocess" >

		<!-- Make a directory to compile into. -->

		<!-- Compile everything, but don't preverify (yet). -->
		<antcall target="display.props" />

		<echo message="add.jars=${add.jars}" />
		<antcall target="add.jars" />
		<antcall target="copy.jar.src" />
		<antcall target="wtk.src.copy" inheritAll="true" />
		<antcall target="wtk.src.copy.file" inheritAll="true" />
		<echo message="comp.src=${comp.src}" />
		<property name="act.comp.src" value="${comp.src}" />
		<echo message="act.comp.src=${act.comp.src}" />
		<property name="wtk.optionalpda.enabled" value="${wtk.optionalpda.enabled.value}" />
		<property name="wtk.bluetooth.enabled" value="${wtk.bluetooth.enabled.value}" />
		<property name="wtk.wma.enabled" value="${wtk.wma.enabled.value}" />
		<property name="wtk.mmapi.enabled" value="${wtk.mmapi.enabled.value}" />
		<property name="wtk.miapi.enabled" value="${wtk.miapi.enabled.value}" />
		<property name="wtk.java3d.enabled" value="${wtk.java3d.enabled.value}" />
		<property name="wtk.wma2.enabled" value="${wtk.wma2.enabled.value}" />
		<property name="wtk.contenthandler.enabled" value="${wtk.contenthandler.enabled.value}" />
		<wtkbuild srcdir="${act.comp.src}" destdir="${classes}" preverify="false" includeantruntime="false" unless="ecj.jar" />
		<antcall target="ecj.compile" inheritAll="true" />
		<antcall target="findbugs" inheritAll="true" />
		<antcall target="pmd" inheritAll="true" />
		<antcall target="cpd" inheritAll="true" />
	</target>

	<target name="ecj.compile" if="ecj.jar" >
		<echo message="-bootclasspath" />
		<echo message="wtk.midpapi=${wtk.midpapi}" />
		<echo message="-classpath" />
		<echo message="${rt.jar}" />
		<echo message="-d" />
		<echo message="${classes}" />
		<echo message="${comp.src}" />
		<java jar="${ecj.jar}" fork="true" >
			<arg value="-bootclasspath" />
			<arg value="${lib.classpath}" />
			<arg value="-classpath" />
			<arg value="${rt.jar}" />
			<arg value="-d" />
			<arg value="${classes}" />
			<arg value="${comp.src}" />
		</java>
	</target>

	<path id="findbugs.classpath">
		<fileset dir="${findbugs.home}/lib">
			<include name="findbugs-ant.jar"/>
		</fileset>
	</path>

	<target name="findbugs" depends="prepare" if="findbugs.home" >
    	<taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask" classpathref="findbugs.classpath" />
		<echo message="wtk.home=${wtk.home}" />
		<mkdir dir="${analyze}" />
		<findbugs home="${findbugs.home}"
			  jvmargs="-Xms512m -Xmx1024m"
              output="html" reportLevel="medium"
              outputFile="${analyze}/findbugs-${build.file.root}.html"
              stylesheet="plain.xsl" >
      <auxClasspath>
		  <fileset dir="${wtk.home}/bin" >
			  <include name="*.jar" />
		  </fileset>
      </auxClasspath>
      <auxClasspath path="${lib.classpath}" />
      <sourcePath path="${comp.src}" />
      <class location="${classes}" />
    </findbugs>
  </target>

	<path id="pmd.classpath">
		<fileset dir="${pmd.home}/lib/">
			<include name="*.jar"/>
		</fileset>
	</path>

	<target name="pmd" if="${use.pmd.task}" >
		<mkdir dir="${analyze}" />
		<taskdef name="pmd" classname="net.sourceforge.pmd.ant.PMDTask" classpathref="pmd.classpath" />
		<pmd rulesetfiles="rulesets/favorites.xml" encoding="UTF-8" >
			  <!-- undo
			  <formatter type="net.sourceforge.pmd.renderers.HTMLRenderer" toFile="${analyze}/pmd-${build.file.root}.html"/>
			  -->
			  <formatter type="xml" toFile="${analyze}/pmd-${build.file.root}.xml"/>
			  <fileset dir="${comp.src}">
				  <include name="**/*.java"/>
			  </fileset>
		  </pmd>
		  <xslt style="${pmd.xsl}" in="${analyze}/pmd-${build.file.root}.xml" out="${analyze}/pmd-${build.file.root}.txt" />
		  <exec executable="${cat.cmd}" >
			  <arg value="${analyze}/pmd-${build.file.root}.txt" />
		  </exec>
	  </target>

	<target name="cpd" if="${use.cpd.task}" >
		<mkdir dir="${analyze}" />
		<taskdef name="cpd" classname="net.sourceforge.pmd.cpd.CPDTask" classpathref="pmd.classpath" />
		<cpd minimumTokenCount="${pmd.minimumtokencount}" ignoreLiterals="true" format="xml" outputFile="${analyze}/cpd-${build.file.root}.xml" encoding="UTF-8" >
			  <fileset dir="${comp.src}">
				  <include name="**/*.java"/>
			  </fileset>
		  </cpd>
		  <xslt style="${pmd.xsl}" in="${analyze}/cpd-${build.file.root}.xml" out="${analyze}/cpd-${build.file.root}.txt" />
		  <exec executable="${cat.cmd}" >
			  <arg value="${analyze}/cpd-${build.file.root}.txt" />
		  </exec>
	  </target>

	<target name="build.testdata" depends="prepare" >
		<echo message="project.test.url=${project.test.url}" />
		<delete dir="${webtestdata}" />
		<copy todir="${webtestdata}" >
			<fileset dir="../testdata" />
		</copy>
		<replace dir="${webtestdata}" token="jar://" value="${project.test.url}" />
		<delete dir="${filetestdata}" />
		<copy todir="${filetestdata}" >
			<fileset dir="../testdata" />
		</copy>
		<replace dir="${filetestdata}" token="jar://" value="${file.test.url}" />
	</target>

	<target name="add.jars" if="add.jars" >
		<unjar src="${ext.jar}" dest="${classes}" />
		<delete includeEmptyDirs="true" >
			<fileset dir="${classes}/META-INF" />
			<fileset dir="${classes}" includes="**/*.jad" />
			<fileset dir="${classes}" includes="**/*MIDlet*" />
		</delete>
	</target>

	<target name="copy.jar.src" if="copy.jar.src" >
		<copy todir="${comp.src}" >
			<fileset dir="${jarsrc}" excludes="**/*MIDlet*" />
		</copy>
	</target>

	<!-- Copy compatsrc to target src directory. -->
	<target name="copy.compat" if="copy.compat" >
		<echo message="copy.compat=${copy.compat}" />
		<copy todir="${comp.src}" overwrite="true" >
			<fileset dir="${compat.src}" includes="**/*.java" />
		</copy>
	</target>

	<!-- Copy testui to target src directory. -->
	<target name="copy.testui" if="copy.testui" >
		<echo message="copy.testui=${copy.testui}" />
		<copy todir="${comp.src}" overwrite="true" >
			<fileset dir="${testui.src}" includes="**/*.java" />
			<filterset refid="defile.filter" />
		</copy>
	</target>

	<!-- Copy testui to target src directory. -->
	<target name="copy.unproc.testui" if="copy.unproc.testui" >
		<echo message="copy.unproc.testui=${copy.unproc.testui}" />
		<copy todir="${comp.src}" overwrite="true" >
			<fileset dir="${testui.src}" includes="**/*.java" />
			<filterset refid="defile.filter" />
		</copy>
	</target>

	<target name="copy.res" depends="prepare" if="need.res" >
		<echo message="res.includes=${res.includes}" />
		<copy todir="${tmpres}/${res.todir}" >
			<fileset dir="${res.dir}" includes="${res.includes}" />
		</copy>
	</target>

	<target name="copy.novice" if="${novice}" >
		<mkdir dir="${tmpres}/data" />
		<copy tofile="${tmpres}/data/novice.txt" >
			<fileset file="${novice.txt.file}" />
		</copy>
	</target>

	<target name="copy.test.res" if="need.test.res" >
		<copy todir="${tmpres}/${res.test.todir}" >
			<fileset dir="${res.test.dir}" />
		</copy>
	</target>

	<target name="make.jad" depends="prepare" >
		<property name="shtml.file.prefix" value="file.prefix.smartphone,file.prefix.afriware,file.prefix.memorysize,file.prefix.full,file.prefix.intlink,file.prefix.signed,file.prefix.verisign,file.prefix.thawte,file.prefix.godaddy,file.prefix.jsr75,file.prefix.jsr238" />
		<property name="sfile.prefix" value="file.prefix.midp1.0,file.prefix.midp2.0,file.prefix.cldc1.0,file.prefix.cldc1.1,file.prefix.novice,file.prefix.large,${shtml.file.prefix}" />
		<property name="sbuild.prefix" value="${sfile.prefix},stage.file" />
		<property name="sbuild.file.root" value="${sbuild.prefix},release.name,-,FMIDLETVERSROOT" />
		<property name="build.file.root" value="${build.file.root}" />
		<property name="file.prefix.signer" value="${file.prefix.godaddy}${file.prefix.thawte}${file.prefix.verisign}" />
		<wtkjad jadfile="${mjadfile}" manifest="${mmanifest}" jarfile="${mjarfile}" update="${update.parm}" name="${project.name}" vendor="${vendor}" version="${MIDLETVERS}" encoding="UTF-8" >
			<midlet name="${project.name}" icon="/${icons.dir}/${app-icon}" class="${midlet.class}" />
			<midlet name="RssSuite" class="com.substanceofcode.jmunit.businessentities.RssSuite" unless="no.test" />
			<midlet name="UtilitySuite" class="com.substanceofcode.jmunit.utils.UtilitySuite" unless="no.test" />
			<midlet name="RssFeedSuite" class="com.substanceofcode.jmunit.businessentities.RssFeedSuite" unless="no.test" />
			<midlet name="RssItemPerfCompatability4Test" class="com.substanceofcode.jmunit.businessentities.RssItemPerfCompatability4Test" unless="no.test" />
			<attribute name="MIDlet-Description" value="${project.description}" />
			<attribute name="MIDlet-Icon" value="/${icons.dir}/${app-icon}" />
			<attribute name="MIDlet-Info-URL" value="${project.info.url}" />
			<attribute name="MIDlet-Jar-URL" value="${mweb.jarfile}" />
			<attribute name="MicroEdition-Configuration" value="${JCLDCVERS}" />
			<attribute name="MicroEdition-Profile" value="${JMIDPVERS}" />
			<attribute name="MIDlet-Permissions" value="${PERMISSIONS_REQ}" />
			<attribute name="MIDlet-Permissions-Opt" value="${PERMISSIONS_OPT}" />
			<attribute name="MIDlet-Data-Size" value="3000" />
			<attribute name="novice" value="${NOVICE}" />
			<attribute name="Program-Version" value="${buildinfo}" />
			<attribute name="original-author" value="${original.author}" />
			<attribute name="sbuild-file-root" value="${sbuild.file.root}" />
			<attribute name="build-file-root" value="${build.file.root}" />
			<attribute name="file-prefix-signer" value="${file.prefix.signer}" />
			<attribute name="file-prefix-cldc1-0" value="${sfile.prefix.cldc1.0}_" />
			<attribute name="file-prefix-cldc1-1" value="${sfile.prefix.cldc1.1}_" />
			<attribute name="file-prefix-full" value="${sfile.prefix.full}_" />
			<attribute name="file-prefix-intlink" value="${sfile.prefix.intlink}_" />
			<attribute name="file-prefix-smartphone" value="${sfile.prefix.smartphone}_" />
			<attribute name="file-prefix-afriware" value="${sfile.prefix.afriware}_" />
			<attribute name="file-prefix-memorysize" value="${file.prefix.memorysize}_" />
			<attribute name="file-prefix-novice" value="${sfile.prefix.novice}_" />
			<attribute name="file-prefix-jsr75" value="${sfile.prefix.jsr75}_" />
			<attribute name="file-prefix-jsr82" value="${sfile.prefix.jsr82}_" />
			<attribute name="file-prefix-jsr120" value="${sfile.prefix.jsr120}_" />
			<attribute name="file-prefix-jsr135" value="${sfile.prefix.jsr135}_" />
			<attribute name="file-prefix-jsr184" value="${sfile.prefix.jsr184}_" />
			<attribute name="file-prefix-jsr205" value="${sfile.prefix.jsr205}_" />
			<attribute name="file-prefix-jsr238" value="${sfile.prefix.jsr238}_" />
			<attribute name="file-prefix-midp1-0" value="${sfile.prefix.midp1.0}_" />
			<attribute name="file-prefix-midp2-0" value="${sfile.prefix.midp2.0}_" />
			<attribute name="file-prefix-novice" value="${sfile.prefix.novice}_" />
			<attribute name="file-prefix-signed" value="${sfile.prefix.signed}_" />
			<attribute name="file-prefix-thawte" value="${sfile.prefix.thawte}_" />
			<attribute name="file-prefix-verisign" value="${sfile.prefix.verisign}_" />
			<attribute name="file-prefix-godaddy" value="${sfile.prefix.godaddy}_" />
			<attribute name="release-name" value="${release.name}" />
			<attribute name="stage-file" value="${stage.file}" />
			<attribute name="FMIDLETVERSROOT" value="${FMIDLETVERSROOT}" />
			<attribute name="jlomicro-level" value="${jlomicro-level}" unless="no.test" />
			<attribute name="jlomicro-handlers" value="${jlomicro-handlers}" unless="no.test" />
			<attribute name="jlomicro-ConsoleHandler-formatter" value="${jlomicro-ConsoleHandler-formatter}" unless="no.test" />
			<attribute name="jlomicro-FormHandler-limit" value="${jlomicro-FormHandler-limit}" unless="no.test" />
			<attribute name="jlomicro-FormHandler-formatter" value="${jlomicro-FormHandler-formatter}" unless="no.test" />
			<attribute name="jlomicro-RecStoreHandler-limit" value="${jlomicro-RecStoreHandler-limit}" unless="no.test" />
			<attribute name="jlomicro-RecStoreHandler-formatter" value="${jlomicro-RecStoreHandler-formatter}" unless="no.test" />
			<attribute name="jlomicro-com-substanceofcode-utils-SortUtil-level" value="${jlomicro-com-substanceofcode-utils-SortUtil-level}" unless="no.test" />
		</wtkjad>

	</target>

	<target name="package.obfuscate.preverify" depends="prepare" >
	    <echo message="keep.obfuscate=${keep.obfuscate}" />
		<property name="wtk.optionalpda.enabled" value="${wtk.optionalpda.enabled.value}" />
		<property name="wtk.bluetooth.enabled" value="${wtk.bluetooth.enabled.value}" />
		<property name="wtk.wma.enabled" value="${wtk.wma.enabled.value}" />
		<property name="wtk.mmapi.enabled" value="${wtk.mmapi.enabled.value}" />
		<property name="wtk.miapi.enabled" value="${wtk.miapi.enabled.value}" />
		<property name="wtk.java3d.enabled" value="${wtk.java3d.enabled.value}" />
		<property name="wtk.wma2.enabled" value="${wtk.wma2.enabled.value}" />
		<property name="wtk.contenthandler.enabled" value="${wtk.contenthandler.enabled.value}" />
		<wtkpackage jarfile="${bin}/${build.file.root}.jar" jadfile="${bin}/${build.file.root}.jad" manifest="${bin}/manifest.mf" cldc="${JCLDCVERS}" profile="${JMIDPVERS}" preverify="true" obfuscate="false" verbose="true" >

			<!-- Package our newly compiled classes and the
                 resources from the WTK's demo application. -->

			<fileset dir="${classes}" />
			<fileset dir="${tmpres}" />

		</wtkpackage>
		<copy file="${bin}/${build.file.root}.jad" tofile="${bin}/pre-smartlink-${build.file.root}.jad" />
		<copy file="${bin}/${build.file.root}.jar" tofile="${bin}/pre-smartlink-${build.file.root}.jar" />
		<property name="wtk.all.enabled" value="true" />
		<wtksmartlink jarfile="${bin}/${build.file.root}.jar" jadfile="${bin}/${build.file.root}.jad" verbose="true" if="keep.smartlink" unless="skip.smartlink" >
			<preserve class="org.kablog.kgui.KFileSelectorMgr" if="jsr75.present" />
		</wtksmartlink>
		<wtkobfuscate jarfile="${bin}/${build.file.root}.jar" jadfile="${bin}/${build.file.root}.jad" verbose="true" if="keep.obfuscate" >
			<preserve class="org.kablog.kgui.KFileSelectorMgr" if="jsr75.present" />
			<argument value="-optimizationpasses" />
			<argument value="${proguard.passes}" />
			<argument value="-allowaccessmodification" />
		</wtkobfuscate>
		<wtkpreverify jarfile="${bin}/${build.file.root}.jar" jadfile="${bin}/${build.file.root}.jad" if="keep.obfuscate" />

	</target>

	<target name="tool.sign.jar" depends="prepare" if="${signed}" unless="${no.jar.sign}" >
		<echo message="tsalias=${tsalias}" />
		<echo message="tsstorepass=${tsstorepass}" />
		<echo message="tskeystore=${tskeystore}" />
		<echo message="tskeypass=${tskeypass}" />
		<delete file="${jsjar.signed.out}" />
		<signjar jar="${jsjar.in}" signedjar="${jsjar.signed.out}" alias="${tsalias}" storepass="${tsstorepass}" keystore="${tskeystore}" keypass="${tskeystore}" verbose="true" internalsf="true" force="true" />
		<!-- Try task above
		<exec executable="${env.JAVA_HOME}/bin/${jarsigner.cmd}" >
			<arg value="-verbose" />
			<arg value="-keystore" />
			<arg value="${tskeystore}" />
			<arg value="-storepass" />
			<arg value="${tskeypass}" />
			<arg value="${jsjar.in}" />
			<arg value="${tsalias}" />
		</exec>
		-->
		<copy file="${jsjar.signed.out}" todir="${distsigned}" overwrite="true" />
	</target>

	<target name="tool.sign" depends="prepare" if="${signed}" unless="${no.jar.sign}" >
		<mkdir dir="${distsigned}" />
		<parallel>
		<sequential>
		<antcall target="tool.sign.jar" inheritAll="true" />
		<antcall target="make.jad" inheritAll="true" >
			<param name="mjadfile" value="${jsjad1.in}" />
			<param name="mmanifest" value="${bin}/manifest.mf" />
			<param name="mjarfile" value="${jsjar.signed.out}" />
			<param name="mweb.jarfile" value="${jsjar.fn}" />
			<param name="update.parm" value="true" />
		</antcall>
		<delete file="${jsjad2.in}" />
		<java jar="${wtk.home}/bin/JadTool.jar" fork="true" >
			<arg value="-addcert" />
			<arg value="-alias" />
			<arg value="${tsalias}" />
			<arg value="-storepass" />
			<arg value="${tsstorepass}" />
			<arg value="-keystore" />
			<arg value="${tskeystore}" />
			<arg value="-storepass" />
			<arg value="${tskeypass}" />
			<arg value="-inputjad" />
			<arg value="${jsjad1.in}" />
			<arg value="-outputjad" />
			<arg value="${jsjad2.in}" />
		</java>
		<waitfor maxwait="30" maxwaitunit="second">
			<available file="${jsjad2.in}"/>
		</waitfor>
	    <echo message="First sleep finished." />
		<delete file="${jsjad3.in}" />
		<java jar="${wtk.home}/bin/JadTool.jar" fork="true" >
			<arg value="-addjarsig" />
			<arg value="-alias" />
			<arg value="${tsalias}" />
			<arg value="-jarfile" />
			<arg value="${jsjar.signed.out}" />
			<arg value="-storepass" />
			<arg value="${tsstorepass}" />
			<arg value="-keypass" />
			<arg value="${tskeypass}" />
			<arg value="-keystore" />
			<arg value="${tskeystore}" />
			<arg value="-storepass" />
			<arg value="${tskeypass}" />
			<arg value="-inputjad" />
			<arg value="${jsjad2.in}" />
			<arg value="-outputjad" />
			<arg value="${jsjad3.in}" />
		</java>
		<waitfor maxwait="30" maxwaitunit="second">
			<available file="${jsjad3.in}"/>
		</waitfor>
	    <echo message="Second sleep finished." />
		<copy file="${jsjad3.in}" tofile="${jsjad.signed.out}" overwrite="true" />
		<copy file="${jsjad.signed.out}" todir="${distsigned}" overwrite="true" />
		</sequential>
		</parallel>
	</target>

	<target name="antenna.wtksign" depends="prepare" if="${signed}" unless="${no.jar.sign}" >
		  <echo message="&lt;wtksign keystore=&quot;${tskeystore}&quot; jadfile=&quot;${sjadfile}&quot; jarfile=&quot;${sjarfile}&quot; certalias=&quot;${tsalias}&quot; storepass=&quot;${tsstorepass}&quot; keypass=&quot;${tsstorepass}&quot; &gt;" />
		<copy file="${jsjad1.in}" tofile="${jsjad.signed.out}" overwrite="true" />
		<copy file="${jsjar.in}" tofile="${jsjar.signed.out}" overwrite="true" />
		<wtksign keystore="${tskeystore}" jadfile="${jsjad.signed.out}" jarfile="${jsjar.signed.out}" certalias="${tsalias}" storepass="${tsstorepass}" certpass="${tsstorepass}" />
		<!-- Not needed
		<antcall target="make.jad" inheritAll="true" >
			<param name="mweb.jarfile" value="${jsjar.fn}" />
			<param name="mjadfile" value="${sjadfile}" />
			<param name="mmanifest" value="${bin}/manifest.mf" />
			<param name="mjarfile" value="${sjarfile}" />
			<param name="update.parm" value="true" />
		</antcall>
		-->
		<copy file="${jsjad.signed.out}" todir="${distsigned}" overwrite="true" />
		<copy file="${jsjar.signed.out}" todir="${distsigned}" overwrite="true" />
	</target>

	  <target name="conv.dos" depends="prepare" unless="${windows.os}" >
		  <echo message="${todos.cmd} cjad.parm=${cjad.parm}" />
		  <exec executable="${todos.cmd}" >
			  <arg value="${cjad.parm}" />
		  </exec>
	  </target>

	<target name="build" depends="prepare" >
		<antcall target="display.props" />
		<!-- Copy a JAD file from the WTK's demo applications.
             Caution: Ant only copies this the first time. Also
             make a directory to compile into. -->
		<mkdir dir="${bin}" />
		<delete dir="${tmpres}" />
		<mkdir dir="${tmpres}" />

		<antcall target="copy.res" />
		<antcall target="copy.novice" />
		<antcall target="copy.test.res" />

		<antcall target="make.jad" inheritAll="true" >
			<param name="mweb.jarfile" value="${build.file.root}.jar" />
			<param name="mjadfile" value="${bin}/${build.file.root}.jad" />
			<param name="mmanifest" value="${bin}/manifest.mf" />
			<param name="mjarfile" value="${bin}/${build.file.root}.jar" />
			<param name="update.parm" value="false" />
		</antcall>
		<!-- Package everything. Most of the necessary information is
             contained in the JAD file. Also preverify the result this
             time. To obfuscate everything, set the corresponding
             parameter to "true" (requires RetroGuard or ProGuard). The
             version parameter increments the MIDlet-Version by one. -->

	    <echo message="obfuscate=${obfuscate}" />
		<!-- package -->
		<antcall target="package.obfuscate.preverify" inheritAll="true" />

		<antcall target="make.jad" inheritAll="true" >
			<param name="mweb.jarfile" value="${build.file.root}.jar" />
			<param name="mjadfile" value="${bin}/${build.file.root}.jad" />
			<param name="mmanifest" value="${bin}/manifest.mf" />
			<param name="mjarfile" value="${bin}/${build.file.root}.jar" />
			<param name="update.parm" value="false" />
		</antcall>
		<copy file="${bin}/${build.file.root}.jar" todir="${build}" />
		<copy file="${bin}/${build.file.root}.jad" todir="${build}" />
		<antcall target="tool.sign" inheritAll="true" >
			<param name="jsjar.signed.out" value="${build}/${build.file.root}.jar" />
			<param name="jsjar.in" value="${bin}/${build.file.root}.jar" />
			<param name="jsjar.fn" value="${build.file.root}.jar" />
			<param name="jsjad1.in" value="${bin}/${build.file.root}.jad" />
			<param name="jsjad2.in" value="${bin}/${build.file.root}-in2.jad" />
			<param name="jsjad3.in" value="${bin}/${build.file.root}-in3.jad" />
			<param name="jsjad.signed.out" value="${build}/${build.file.root}.jad" />
		</antcall>

		<antcall target="conv.dos" inheritAll="true" >
			<param name="cjad.parm" value="${build}/${build.file.root}.jad" />
		</antcall>
		<copy file="${build}/${build.file.root}.jar" todir="${dist}" />
		<copy file="${build}/${build.file.root}.jad" todir="${dist}" />
		<antcall target="create.prc" inheritAll="true" />
		<!-- Manifest changes based on MIDP/JSR's so use prefixes to -->
		<!-- identify which is which -->
		<copy file="${bin}/manifest.mf" todir="${build}/${build.prefix}manifest-${FMIDLETVERSROOT}" overwrite="true" />

		<copy todir="${dist}" >
			<fileset file="${docs}/README.txt" />
			<filterset>
				<filter token="STAGEFILE" value="${stage.file}" />
			</filterset>
		</copy>
		<copy todir="${distall}" file="${dist}/README.txt" />
		<copy todir="${distall}" >
			<fileset file="${docs}/READMEAll.txt" />
			<fileset file="${docs}/READPODCASTME.txt" />
			<filterset>
				<filter token="STAGEFILE" value="${stage.file}" />
			</filterset>
		</copy>
	</target>

	<target name="bb-ant.sign" depends="prepare" if="${signed}" unless="${no.rim.sign}" >
	    <echo message="Signing ../${rim.build.file.root}.cod waiting 1 second." />
		<sleep seconds="${bb.sleep}" />
		<copy file="../${rim.build.file.root}.cod" tofile="${bin}/${rim.build.file.root}-presign.cod" overwrite="true" />
		<sigtool codfile="../${rim.build.file.root}.cod" password="${env.THAWTE_KEYSTORE_PASS}" />
		<move file="../${rim.build.file.root}.cod" tofile="${dist}/${rim.build.file.root}.cod"  preservelastmodified="true" />
		<move file="../${rim.build.file.root}.signed" tofile="${dist}/${rim.build.file.root}.signed"  preservelastmodified="true" />
		<copy file="${dist}/${rim.build.file.root}.cod" todir="${rim.bin}" overwrite="true" />
		<copy file="${dist}/${rim.build.file.root}.signed" todir="${rim.bin}" overwrite="true" />
		<copy file="${dist}/${rim.build.file.root}.cod" todir="${distsigned}" overwrite="true" />
		<copy file="${dist}/${rim.build.file.root}.signed" todir="${distsigned}" overwrite="true" />
		<move todir="${bin}" overwrite="true" >
			<fileset dir="../wtkbuild" includes="**${rim.build.file.root}.cod" />
			<globmapper from="*${rim.build.file.root}.cod" to="${rim.build.file.root}-tmp.cod" />
		</move>
	</target>

	<target name="create.prc" depends="prepare" if="wtk.wme.home" unless="${signed}" >
		<wtkmakeprc jarfile="${bin}/${project.name}.jar" name="${project.name}"  highres="true" creator="${prc.creater}" longname="${prc.longname}" />
		<mkdir dir="${dist}/${build.prefix}prc" />
		<move file="${bin}/${project.name}.prc" todir="${dist}/${build.prefix}prc"  preservelastmodified="true" />
	</target>

	<target name="exec.create.rim.files" depends="prepare" if="rim.home" >
		<copy file="${bin}/${project.name}.jar" tofile="${bin}/${build.file.root}_cod_in.jar" />
		<antcall target="make.jad" inheritAll="true" >
			<param name="mweb.jarfile" value="${build.file.root}_cod_in.jar" />
			<param name="mjadfile" value="${bin}/${build.file.root}_cod_in.jad" />
			<param name="mmanifest" value="${bin}/manifest.mf" />
			<param name="mjarfile" value="${bin}/${build.file.root}_cod_in.jar" />
			<param name="update.parm" value="false" />
		</antcall>
		<exec executable="${rim.home}\\bin\\rapc" >
			<arg value="import=&quot;${rim.home}\\lib\\net_rim_api.jar&quot;" />
			<arg value="codename=${project.name}" />
			<arg value="-midlet" />
			<arg value="jad=${dist}/${build.file.root}_cod.jad" />
			<arg value="${bin}/${build.file.root}_cod_in.jar" />
		</exec>
		<move file="${project.name}.cso" tofile="${rim.bin}/${rim.build.file.root}.cso"  preservelastmodified="true" />
		<move file="${project.name}.cod" tofile="${dist}/${rim.build.file.root}.cod"  preservelastmodified="true" />
		<move file="${project.name}.debug" tofile="${rim.bin}/${rim.build.file.root}.debug"  preservelastmodified="true" />
	</target>

	<target name="jar.create.rim.files" depends="prepare" if="jar.jde.home" unless="${bb.jde.use}" >
	    <echo message="basedir=${basedir}" />
	    <echo message="jde.home=${jde.home}" />
	    <echo message="${basedir}/${dist}/${rim.build.file.root}.cod=${basedir}/${dist}/${rim.build.file.root}.cod" />
		<copy file="${bin}/${build.file.root}.jar" tofile="${bin}/${rim.build.file.root}.jar" />
		<antcall target="make.jad" inheritAll="true" >
			<param name="mweb.jarfile" value="${rim.build.file.root}.jar" />
			<param name="mjadfile" value="${bin}/${rim.build.file.root}.jad" />
			<param name="mmanifest" value="${bin}/manifest.mf" />
			<param name="mjarfile" value="${bin}/${rim.build.file.root}.jar" />
			<param name="update.parm" value="false" />
		</antcall>
		<mkdir dir="${rim.bin}" />
		<java classpathref="jde.classpath" classname="net.rim.tools.compiler.Compiler" >
			<arg value="import=${jde.home.path}/lib/net_rim_api.jar" />
			<arg value="codename=${rim.build.file.root}" />
			<arg value="-midlet" />
			<arg value="jad=${basedir}/${bin}/${rim.build.file.root}.jad" />
			<arg value="${basedir}/${bin}/${rim.build.file.root}.jar" />
		</java>
		<mkdir dir="${rim.bin}" />
		<copy file="../${rim.build.file.root}.cod" tofile="${dist}/${rim.build.file.root}.cod" />
		<copy file="../${rim.build.file.root}.cod" tofile="${rim.bin}/${rim.build.file.root}.cod" />
		<antcall target="bb-ant.sign" inheritAll="true" />
		<mkdir dir="${rim.bin.alx}" />
		<alx destdir="${rim.bin.alx}" filename="${rim.build.file.root}.alx" >
			<application id="${midlet.package}" name="${midlet.name}" vendor="${vendor}" version="${MIDLETVERS}" description="${project.description}" >
				<codset>
					<fileset dir="${rim.bin}" includes="*.cod" />
					<fileset dir="${rim.bin}" includes="*.signed" />
				</codset>
			</application>
		</alx>
		<copy file="${bin}/${rim.build.file.root}.jad" tofile="${rim.bin.alx}/${rim.build.file.root}.jad"  preservelastmodified="true" />
		<copy file="${bin}/${rim.build.file.root}.jar" tofile="${rim.bin.alx}/${rim.build.file.root}.jar"  preservelastmodified="true" />
		<zip destfile="${dist}/${rim.build.file.root}.zip" basedir="${rim.bin.alx}" />
		<move file="${rim.bin.alx}/${rim.build.file.root}.alx" tofile="${dist}/${rim.build.file.root}.alx"  preservelastmodified="true" />
		<move todir="${dist}" >
			<fileset dir="${rim.bin}" includes="*.cod" />
			<fileset dir="${rim.bin}" includes="*.signed" />
		</move>
		<move file="${bin}/${rim.build.file.root}.jad" tofile="${dist}/${rim.build.file.root}.jad"  preservelastmodified="true" />
		<move file="${bin}/${rim.build.file.root}.jar" tofile="${dist}/${rim.build.file.root}.jar"  preservelastmodified="true" />
		<move file="../${rim.build.file.root}.cso" tofile="${rim.bin}/${rim.build.file.root}.cso"  preservelastmodified="true" />
		<move file="../${rim.build.file.root}.debug" tofile="${rim.bin}/${rim.build.file.root}.debug"  preservelastmodified="true" />
		<move file="../${rim.build.file.root}.jar" tofile="${rim.bin}/${rim.build.file.root}.jar"  preservelastmodified="true" />
		<delete file="../${rim.build.file.root}-1.debug" />
	</target>

	<target name="jde.create.rim.files" depends="prepare" if="${bb.jde.use}" >
	    <echo message="basedir=${basedir}" />
	    <echo message="jde.home=${jde.home}" />
	    <echo message="${basedir}/${dist}/${rim.build.file.root}.jar=${basedir}/${dist}/${rim.build.file.root}.jar}" />
	    <echo message="rim.bin=${rim.bin}" />
		<!-- Check with defines in jdk.home rapc. -->
		<property name="rapc.preprocess.defines" value="${DMIDPVERS};${DCLDCVERS};${DMEMSIZEDEF};${DITUNESDEF};${DSMARTPHONEDEF};${DAFRIWAREDEF};${DINTLINKDEF};${DFULLVERSDEF};${DSIGNEDDEF};${DFEATUREMGRDEF};${DFEATUREFORMDEF};${DNOVICEDEF};${DTHAWTEDEF};${DGODADDYDEF};${DVERISIGNDEF};${DJSR75};${DJSR238};${DTESTDEF};${DJMTESTDEF};${DJMTESTPLUSDEF};${DJMTESTFREEDEF};${DLOGDEF};${DTESTUIDEF};${DCOMPATDEF}" />
		<echo message="prapc.reprocess.defines=${prapc.reprocess.defines}" />
		<mkdir dir="${rim.bin}" />
		<rapc jdehome="${jde.home}" exepath="${wtk.home}/bin" srcdir="${comp.src}" destdir="${rim.bin}" output="${rim.build.file.root}" defines="${prapc.reprocess.defines}" verbose="true" nodebug="true" >
			<jdp type="midlet" title="${release.name}" vendor="${vendor}" version="${MIDLETVERS}" description="${project.description}" midletclass="${midlet.class}" icon="/${icons.dir}/${app-icon}" />
		</rapc>
		<antcall target="bb-ant.sign" inheritAll="true" />
		<mkdir dir="${rim.bin.alx}" />
		<alx destdir="${rim.bin.alx}" filename="${rim.build.file.root}.alx" >
			<application id="${midlet.package}" name="${midlet.name}" vendor="${vendor}" version="${MIDLETVERS}" description="${project.description}" >
				<codset>
					<fileset dir="${rim.bin}" includes="*.cod" />
					<fileset dir="${rim.bin}" includes="*.signed" />
				</codset>
			</application>
		</alx>
		<move file="${rim.bin}/${rim.build.file.root}.cso" tofile="${dist}/${rim.build.file.root}.cso"  preservelastmodified="true" />
		<move file="${rim.bin}/${rim.build.file.root}.cod" tofile="${dist}/${rim.build.file.root}.cod"  preservelastmodified="true" />
		<copy file="${bin}/${rim.build.file.root}.jad" tofile="${rim.bin.alx}/${rim.build.file.root}.jad"  preservelastmodified="true" />
		<copy file="${bin}/${rim.build.file.root}.jar" tofile="${rim.bin.alx}/${rim.build.file.root}.jar"  preservelastmodified="true" />
		<zip destfile="${rim.bin}/${rim.build.file.root}.zip" basedir="${rim.bin.alx}" />
		<move file="${rim.bin.alx}/${rim.build.file.root}.alx" tofile="${dist}/${rim.build.file.root}.alx"  preservelastmodified="true" />
		<move file="${rim.bin}/${rim.build.file.root}.zip" tofile="${dist}/${rim.build.file.root}.zip"  preservelastmodified="true" />
	</target>

	<target name="svn.op.dist" if="${need.svn.preprocessed}" unless="${skip.svn.op}" >
		<delete dir="${op.dir}" />
		<mkdir dir="${op.dir}" />

	    <echo message="svn.url=${svn.url}" />
		<echo message="${svn.pgm} ${svn.op} ${svn.url} ${svn.src}" />
		<exec executable="${svn.pgm}" dir="${op.dir}" >
			<arg value="${svn.op}" />
			<arg value="${svn.url}" />
			<arg value="${svn.src}" />
		</exec>
		<move todir="${op.dir}/src" >
			<fileset dir="${op.dir}/${svn.src}/src" />
		</move>
		<move todir="${op.dir}/presrc" >
			<fileset dir="${op.dir}/${svn.src}/presrc" />
		</move>
		<move todir="${op.dir}/testpresrc" >
			<fileset dir="${op.dir}/${svn.src}/testpresrc" />
		</move>
		<move todir="${op.dir}/compatpresrc" >
			<fileset dir="${op.dir}/${svn.src}/compatpresrc" />
		</move>
		<move todir="${op.dir}/testdata" >
			<fileset dir="${op.dir}/${svn.src}/testdata" />
		</move>
		<mkdir dir="${op.dir}/docs" />
		<move todir="${op.dir}/docs" >
			<fileset file="${op.dir}/${svn.src}/docs/README.txt" />
		</move>
		<move todir="${op.dir}/manifestsrc" >
			<fileset dir="${op.dir}/${svn.src}/manifestsrc" />
		</move>
		<move todir="${op.dir}/zipedsrc" >
			<fileset dir="${op.dir}/${svn.src}/zipedsrc" />
		</move>
		<move todir="${op.dir}/wtkbuild" >
			<fileset dir="${op.dir}/${svn.src}/wtkbuild" />
		</move>
		<copy todir="${dist}" file="${op.dir}/${svn.src}/gpl-2.txt" />
		<copy todir="${dist}" file="${op.dir}/${svn.src}/lgpl-2_1.txt" />
		<move todir="${op.dir}" >
			<fileset file="${op.dir}/${svn.src}/release_notes.txt" />
			<fileset file="${op.dir}/${svn.src}/changelog.txt" />
			<fileset file="${op.dir}/${svn.src}/gpl-2.txt" />
			<fileset file="${op.dir}/${svn.src}/lgpl-2_1.txt" />
			<fileset file="${op.dir}/${svn.src}/build.xml" />
		</move>
		<move todir="${op.dir}/nbproject" >
			<fileset dir="${op.dir}/${svn.src}/nbproject" />
		</move>
		<delete dir="${op.dir}/nbproject/private" />
		<move todir="${op.dir}/nbproject/private" >
			<fileset dir="${op.dir}/${svn.src}/nbproject-private" />
		</move>
		<delete dir="${op.dir}/${svn.src}" />
		<!--
		<svn javahl="false" >
			<export srcUrl="${svn.url}" srcPath="${svn.src}" destPath="${op.dir}" />
		</svn>
		-->
	</target>

	<!-- Distribute expoted source to ${preprocessed} -->
	<target name="dist.preprocessed" if="need.dist.preprocessed" >
		<delete dir="${preprocessed}" />
		<mkdir dir="${preprocessed}" />
		<copy todir="${preprocessed}/src" >
			<fileset dir="${comp.src}" includes="**/*.java" />
		</copy>
	</target>

	<target name="dist.svn" if="need.dist.svn" >
		<antcall target="svn.op.dist" >
			<param name="svn.op" value="export" />
			<param name="op.dir" value="${svnexport}" />
		</antcall>
	</target>

	<target name="dist.svn.dirs" depends="prepare" if="need.dist.svn.dirs" >
		<antcall target="svn.op.dist" >
			<param name="svn.op" value="export" />
			<param name="op.dir" value="${main}" />
		</antcall>
	</target>

	<target name="google.upload.line.append" if="upload.to.google">
		<echo message="googlecode_upload.pl --user=${svn.user} --pass=${svn.pass} --project=${svn.src} --progress --file=${file.name} --summary=&quot;${file.summary}&quot; ${append.google.labels}&#10;" file="${distgooglecode}/googleupload.sh" append="true" />
	</target>

	<target name="set.file.summary" depends="prepare" unless="${no.individual.file}" >
		<property name="latest.binary.desc" value="latest ${stage.phase.text} binary for direct phone install this is included in binary zip.  See documentation for which program to use." />
		<property name="file.summary" value="${stage.stable.text} ${signed.text}${verisign.text}${thawte.text}${godaddy.text}${device.type} MIDP ${wtk.midp.version} ${intlink} ${smartphone} ${jsr75} Mobile RSS Reader - Version ${MIDLETVERSROOT} ${ustage.txt}${latest.binary.desc}" />
	</target>

	<target name="google.upload.line.append.file" depends="set.file.summary" unless="${no.individual.file}" >
		<antcall target="google.upload.line.append" inheritAll="true" >
			<param name="file.name" value="${fprefix}${build.file.root}${fext.suffix}.${fext}" />
		</antcall>
	</target>

	<target name="google.upload.append" if="upload.to.google">
		<property name="google.labels" value="" />
		<echo message="cd */RSS*/dist&#10;" file="${distgooglecode}/googleupload.sh" append="true" />
		<echo message="pwd&#10;" file="${distgooglecode}/googleupload.sh" append="true" />
		<antcall target="google.upload.line.append.file" inheritAll="true" >
			<param name="fprefix" value="rim_" />
			<param name="fext" value="zip" />
			<param name="fext.suffix" value="" />
			<param name="append.google.labels" value="${google.labels}" />
			<param name="device.type" value="Blackberry only zip with alx and cod," />
		</antcall>
		<antcall target="google.upload.line.append.file" inheritAll="true" >
			<param name="fprefix" value="" />
			<param name="fext" value="jad" />
			<param name="fext.suffix" value="" />
			<param name="append.google.labels" value="Deprecated,Type-Package" />
			<param name="device.type" value="(not Blackberry)" />
		</antcall>
		<!-- Only upload RIM zip file as others are not usable.
		<antcall target="google.upload.line.append.file" inheritAll="true" >
			<param name="fprefix" value="rim_" />
			<param name="fext" value="cod" />
			<param name="fext.suffix" value="" />
			<param name="append.google.labels" value="${google.labels}" />
			<param name="device.type" value="Blackberry" />
		</antcall>
		-->
		<antcall target="google.upload.line.append.file" inheritAll="true" >
			<param name="fprefix" value="" />
			<param name="fext" value="jar" />
			<param name="fext.suffix" value="" />
			<param name="append.google.labels" value="${google.labels}" />
			<param name="device.type" value="(not Blackberry)" />
		</antcall>
		<echo message="cd ../../..&#10;" file="${distgooglecode}/googleupload.sh" append="true" />
		<echo message="pwd&#10;" file="${distgooglecode}/googleupload.sh" append="true" />
	</target>

	<target name="sftp.index.line.append" depends="set.file.summary" if="upload.to.sftp">
		<echo message="&lt;li&gt;&lt;a href=&quot;device-install-files/${file.name}&quot;&gt;${file.name} ${file.summary}&lt;/a&gt;&lt;/li&gt;&#10;" file="${sftp.pgm.index.file}" append="true" />
	</target>

	<target name="sftp.upload.line.append" if="upload.to.sftp">
		<echo message="put ${file.name} device-install-files&#10;" file="${sftp.pgm.in.file}" append="true" />
	</target>

	<target name="sftp.upload.line.append.sun.file" depends="prepare" >
		<property name="device.type" value="(not Blackberry)" />
		<property name="file.name" value="${rim.build.file.root}${fext.suffix}.${fext}" />
		<antcall target="sftp.upload.line.append" inheritAll="true" >
			<param name="file.name" value="${build.file.root}${fext.suffix}.${fext}" />
		</antcall>
		<antcall target="sftp.index.line.append" inheritAll="true" >
			<param name="file.name" value="${build.file.root}${fext.suffix}.${fext}" />
		</antcall>
	</target>

	<target name="sftp.upload.line.append.rim.file" depends="prepare" >
		<property name="device.type" value="Blackberry" />
		<antcall target="sftp.upload.line.append" inheritAll="true" >
			<param name="file.name" value="${rim.build.file.root}${fext.suffix}.${fext}" />
		</antcall>
		<antcall target="sftp.index.line.append" inheritAll="true" >
			<param name="file.name" value="${rim.build.file.root}${fext.suffix}.${fext}" />
		</antcall>
	</target>

	<target name="sftp.upload.append.sun" depends="prepare" if="${upload.to.sftp}" unless="${sftp.no.sun}" >
		<antcall target="sftp.upload.line.append.sun.file" inheritAll="true" >
			<param name="fext" value="jad" />
			<param name="fext.suffix" value="" />
		</antcall>
		<antcall target="sftp.upload.line.append.sun.file" inheritAll="true" >
			<param name="fext" value="jar" />
			<param name="fext.suffix" value="" />
		</antcall>
		<antcall target="sftp.applet.initialize" inheritAll="true" />
	</target>

	<target name="sftp.upload.append.rim" depends="prepare" if="${upload.to.sftp}" >
		<!-- Do not copy jad files as they are in the zip file.
		<antcall target="sftp.upload.line.append.rim.file" inheritAll="true" >
			<param name="fext" value="jad" />
			<param name="fext.suffix" value="" />
		</antcall>
		-->
		<!-- Do not copy jar files as they are in the zip file.
		<antcall target="sftp.upload.line.append.rim.file" inheritAll="true" >
			<param name="fext" value="jar" />
			<param name="fext.suffix" value="" />
		</antcall>
		-->
		<!-- Do not copy cod files as they are in the zip file.
		<antcall target="sftp.upload.line.append.rim.file" inheritAll="true" >
			<param name="fext" value="cod" />
			<param name="fext.suffix" value="" />
		</antcall>
		-->
		<antcall target="sftp.upload.line.append.rim.file" inheritAll="true" >
			<param name="fext" value="zip" />
			<param name="fext.suffix" value="" />
		</antcall>
		<!-- Do not copy alx files as they are in the zip file.
		<antcall target="sftp.upload.line.append.rim.file" inheritAll="true" >
			<param name="fext" value="alx" />
			<param name="fext.suffix" value="" />
		</antcall>
		-->
	</target>

	<target name="sftp.upload.append" depends="prepare" if="upload.to.sftp">
		<antcall target="sftp.upload.append.rim" inheritAll="true" />
		<antcall target="sftp.upload.append.sun" inheritAll="true" />
		<concat destfile="${sftp.in.file}" append="true" >
			<fileset file="${sftp.pgm.in.file}" />
		</concat>
		<concat destfile="${sftp.index.file}" append="true" >
			<fileset file="${sftp.pgm.index.file}" />
		</concat>
	</target>

	<target name="sftp.upload.archives" depends="prepare" if="upload.to.sftp">
		<echo message="lcd ../${distproject-name}&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ${dist.project.src.zip}&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ${dist.project.expert.zip}&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ${dist.project.smartphone.zip}&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ${dist.project.bin.zip}&#10;" file="${sftp.in.file}" append="true" />
		<echo message="lcd ../${dist.name}&#10;" file="${sftp.in.file}" append="true" />
	</target>

	<target name="sftp.applet.initialize" depends="prepare" if="${need.applet}" >
		<mkdir dir="${ftpdist.dir}" />
		<mkdir dir="${ftp.demo.dist.dir}" />
		<mkdir dir="${ftpdist.dir}/signedlib" />
		<property name="file.vers.prefix" value="-demo-${file.prefix.godaddy}${file.prefix.verisign}${file.prefix.thawte}v${fn.root.emulator.version}${dist.stage.file}" />
		<property name="microemu.fn.root" value="${microemu.prefix.signed}microemu" />
		<antcall target="tool.sign.jar" inheritAll="true" >
			<param name="jsjar.in" value="${emulator.home}/lib/microemu-javase-applet.jar" />
			<param name="jsjar.signed.out" value="${ftpdist.dir}/signedlib/${microemu.fn.root}-javase-applet${file.vers.prefix}.jar" />
		</antcall>
		<antcall target="tool.sign.jar" inheritAll="true" >
			<param name="jsjar.in" value="${emulator.home}/devices/microemu-device-large.jar" />
			<param name="jsjar.signed.out" value="${ftpdist.dir}/signedlib/${microemu.fn.root}-device-large${file.vers.prefix}.jar" />
		</antcall>
		<copy file="${emulator.home}/lib/midpapi20.jar" tofile="${ftpdist.dir}/signedlib/${microemu.prefix.signed}midpapi20${file.vers.prefix}.jar" overwrite="true" />
		<antcall target="tool.sign.jar" inheritAll="true" >
			<param name="jsjar.in" value="${emulator.home}/lib/midpapi20.jar" />
			<param name="jsjar.signed.out" value="${ftpdist.dir}/signedlib/${microemu.prefix.signed}midpapi20${file.vers.prefix}.jar" />
		</antcall>
		<copy file="${emulator.home}/lib/cldcapi11.jar" tofile="${ftpdist.dir}/signedlib/${microemu.prefix.signed}cldcapi11${file.vers.prefix}.jar" overwrite="true" />
		<antcall target="tool.sign.jar" inheritAll="true" >
			<param name="jsjar.in" value="${emulator.home}/lib/cldcapi11.jar" />
			<param name="jsjar.signed.out" value="${ftpdist.dir}/signedlib/${microemu.prefix.signed}cldcapi11${file.vers.prefix}.jar" />
		</antcall>
		<antcall target="tool.sign.jar" inheritAll="true" >
			<param name="jsjar.in" value="${emulator.home}/lib/microemu-jsr-75.jar" />
			<param name="jsjar.signed.out" value="${ftpdist.dir}/signedlib/${microemu.fn.root}-jsr-75${file.vers.prefix}.jar" />
		</antcall>
		<property name="emulator.file.name" value="${emulator.root}${file.vers.prefix}.jar" />
		<antcall target="tool.sign.jar" inheritAll="true" >
			<param name="jsjar.in" value="${path.emulator.jar}" />
			<param name="jsjar.signed.out" value="${ftpdist.dir}/signedlib/${microemu.prefix.signed}${emulator.file.name}" />
		</antcall>
		<filterset id="emulator.info" >
			<filter token="EMULATORJAR" value="${microemu.prefix.signed}${emulator.file.name}" />
			<filter token="EMULATORCLASS" value="${emulator.class}" />
			<filter token="FILEVERSPREFIX" value="${file.vers.prefix}" />
			<filter token="BUILDFILEROOT" value="${build.file.root}" />
			<filter token="MICROEMUFNROOT" value="${microemu.fn.root}" />
			<filter token="MICROEMUPREFIXSIGNED" value="${microemu.prefix.signed}" />
		</filterset>
		<copy file="${src}/main/html/microemuapplet.html" tofile="${ftp.demo.dist.dir}/microemu_${html.file.prefix}applet${file.vers.prefix}.html" overwrite="true" >
			<filterset refid="midlet.info" />
			<filterset refid="emulator.info" />
		</copy>
		<copy file="${src}/main/bash/microemu.sh" tofile="${ftp.demo.dist.dir}/microemu_${html.file.prefix}demo${file.vers.prefix}.sh" overwrite="true" >
			<filterset refid="midlet.info" />
			<filterset refid="emulator.info" />
		</copy>
		<echo message="-mkdir signedlib&#10;" file="${sftp.in.file}" append="true" />
		<echo message="mput ../${ftpdist.name}/signedlib/* signedlib&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ../${ftpdist.name}/apache.htaccess signedlib/.htaccess&#10;" file="${sftp.in.file}" append="true" />
		<echo message="-mkdir ${ftp.demo.dist.name}&#10;" file="${sftp.in.file}" append="true" />
		<echo message="mput ../${ftpdist.name}/${ftp.demo.dist.name}/* ${ftp.demo.dist.name}&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ../${ftpdist.name}/apache.htaccess ${ftp.demo.dist.name}/.htaccess&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ../${dist.name}/${build.file.root}.jar signedlib&#10;" file="${sftp.in.file}" append="true" />
	</target>

	<target name="sftp.upload.initialize" if="upload.to.sftp">
		<mkdir dir="${ftp.in.dir}" />
		<echo message="cd ${sftp.root.dir}&#10;" file="${sftp.in.file}" append="true" />
		<echo message="pwd&#10;" file="${sftp.in.file}" append="true" />
		<property name="ftp.vers.dir" value="Version\ ${MIDLETVERSROOT}\ ${ftp.ustage.txt}Source\ and\ Binaries" />
		<property name="ftp.vers.url" value="Version%20${MIDLETVERSROOT}%20${ftp.ustage.url.txt}Source%20and%20Binaries" />
		<property name="ftp.vers.desc" value="Version ${MIDLETVERSROOT} ${ftp.ustage.desc.txt}Source and Binaries" />
		<echo message="-mkdir ${ftp.vers.dir}&#10;" file="${sftp.in.file}" append="true" />
		<echo message="cd ${ftp.vers.dir}&#10;" file="${sftp.in.file}" append="true" />
		<echo message="pwd&#10;" file="${sftp.in.file}" append="true" />
		<echo message="-mkdir device-install-files&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ../${ftpdist.name}/apache.htaccess .htaccess&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ../${main}/changelog.txt changelog-${FMIDLETVERSROOT}${dist.stage.file}.txt&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ../${main}/gpl-2.txt gpl-2.txt&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ../${main}/lgpl-2_1.txt lgpl-2_1.txt&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ../${main}/release_notes.txt release_notes-${FMIDLETVERSROOT}${dist.stage.file}.txt&#10;" file="${sftp.in.file}" append="true" />
		<echo message="put ../${main}/changelog.txt changelog-${FMIDLETVERSROOT}${dist.stage.file}.txt&#10;" file="${sftp.in.file}" append="true" />
		<echo message="&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;&#10;" file="${sftp.index.file}" append="true" />
		<echo message="&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; dir=&quot;ltr&quot; lang=&quot;en&quot;&gt;&#10;" file="${sftp.index.file}" append="true" />
		<echo message="&lt;head&gt;&#10;&lt;title&gt;${ftp.vers.desc}&lt;/title&gt;&#10;" file="${sftp.index.file}" append="true" />
		<echo message="&lt;base href=&quot;${sftp.base.url}/${ftp.vers.url}/&quot; /&gt;&#10;" file="${sftp.index.file}" append="true" />
		<echo message="&lt;/head&gt;&#10;&lt;body&gt;&#10;" file="${sftp.index.file}" append="true" />
		<echo message="&lt;h2&gt;${ftp.vers.desc}&lt;/h2&gt;&#10;" file="${sftp.index.file}" append="true" />
		<echo message="&lt;ul&gt;&#10;" file="${sftp.index.file}" append="true" />
		<antcall target="sftp.upload.archives" inheritAll="true" />
	</target>

	<target name="sftp.upload.finish" depends="prepare" if="upload.to.sftp">
		<echo message="Adding to file ${sftp.in.file}" />
		<echo message="&lt;/ul&gt;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" file="${sftp.index.file}" append="true" />
		<echo message="mput ../${ftp.in.dir.name}/*htm " file="${sftp.in.file}" append="true" />
	</target>

	<target name="sourceforge.initialize" depends="prepare.temporary,prepare.development,prepare.beta,prepare.rc,prepare.production,prepare" if="upload.to.sftp">
		<antcall target="sftp.upload.initialize" inheritAll="true" >
			<param name="ftp.in.dir" value="${distsourceforge}" />
			<param name="ftp.in.base" value="${distsourceforge}" />
			<param name="sftp.in.file" value="${sourceforge.ftp.in.file}" />
			<param name="sftp.index.file" value="${sourceforge.ftp.index.file}" />
			<param name="sftp.root.dir" value="${sourceforge.rootdir}" />
		</antcall>
	</target>

	<target name="yinlight.initialize" depends="prepare.temporary,prepare.development,prepare.beta,prepare.rc,prepare.production,prepare" if="upload.to.sftp">
		<property name="yinlight.subdomain" value="${src.module.name}" />
		<echo message="yinlight.subdomain=${yinlight.subdomain}" />
		<property name="yinlight.rootdir" value="html/${yinlight.tmp.subdir}${src.module.name}/downloads" />
		<echo message="yinlight.rootdir=${yinlight.rootdir}" />
		<property name="yinlight.base.url" value="http://${yinlight.subdomain}.yinlight.net/${yinlight.tmp.subpath}downloads" />
		<echo message="yinlight.base.url=${yinlight.base.url}" />
		<antcall target="sftp.upload.initialize" inheritAll="true" >
			<param name="ftp.in.dir" value="${distyinlight}" />
			<param name="sftp.in.file" value="${yinlight.ftp.in.file}" />
			<param name="sftp.index.file" value="${yinlight.ftp.index.file}" />
			<param name="sftp.root.dir" value="${yinlight.rootdir}" />
			<param name="sftp.base.url" value="${yinlight.base.url}" />
		</antcall>
	</target>

	<target name="sourceforge.finish" depends="prepare" if="upload.to.sftp">
		<antcall target="sftp.upload.finish" inheritAll="true" >
			<param name="ftp.in.dir" value="${distsourceforge}" />
			<param name="ftp.in.dir.name" value="${distsourceforge.name}" />
			<param name="sftp.in.file" value="${sourceforge.ftp.in.file}" />
			<param name="sftp.index.file" value="${sourceforge.ftp.index.file}" />
			<param name="sftp.root.dir" value="${sourceforge.rootdir}" />
			<param name="sftp.base.url" value="${sourceforge.base.url}" />
		</antcall>
	</target>

	<target name="yinlight.finish" depends="prepare" if="upload.to.sftp">
		<antcall target="sftp.upload.finish" inheritAll="true" >
			<param name="ftp.in.dir" value="${distyinlight}" />
			<param name="ftp.in.dir.name" value="${distyinlight.name}" />
			<param name="sftp.in.file" value="${yinlight.ftp.in.file}" />
			<param name="sftp.index.file" value="${yinlight.ftp.index.file}" />
			<param name="sftp.root.dir" value="${yinlight.rootdir}" />
			<param name="sftp.base.url" value="${yinlight.base.url}" />
		</antcall>
	</target>

	<!-- Distribute the version (e.g. MIDP-1.0, MIDP-2.0, etc) to -->
	<!-- it's target/build and target/dist target/main -->
		 
	<target name="dist.version" depends="prepare" >
		<property name="no.test" value="true" />
		<mkdir dir="${distgooglecode}" />
		<!-- delete TODO
		<delete dir="${build.vers}" />
		<mkdir dir="${build.vers}" />
		-->
		<antcall target="clean.compile" />
		<antcall target="compile" />
		<antcall target="dist.preprocessed" />

		<delete dir="${compiled}" />
		<if>
			<equals arg1="${make.build.files}" arg2="true" />
			<then>
			<copy todir="${compiled}" >
				<fileset dir="${classes}" />
			</copy>
			</then>
		</if>
		<antcall target="build" />
		<antcall target="google.upload.append" inheritAll="true" />
		<antcall target="sftp.upload.append" inheritAll="true" >
			<param name="sftp.pgm.in.file" value="${bin}/yl${build.file.root}in" />
			<param name="sftp.in.file" value="${yinlight.ftp.in.file}" />
			<param name="sftp.pgm.index.file" value="${bin}/yl${build.file.root}.htm" />
			<param name="sftp.index.file" value="${yinlight.ftp.index.file}" />
		</antcall>
		<antcall target="sftp.upload.append" >
			<param name="sftp.pgm.in.file" value="${bin}/sf${build.file.root}in" />
			<param name="sftp.in.file" value="${sourceforge.ftp.in.file}" />
			<param name="sftp.pgm.index.file" value="${bin}/sf${build.file.root}.htm" />
			<param name="sftp.index.file" value="${sourceforge.ftp.index.file}" />
		</antcall>
		<antcall target="exec.create.rim.files" inheritAll="true" />
		<antcall target="jar.create.rim.files" inheritAll="true" >
			<param name="jde.home" value="${jar.jde.home}" />
		</antcall>
		<antcall target="jde.create.rim.files" inheritAll="true" >
			<param name="jde.home" value="${bb.jde.home}" />
		</antcall>
		<delete file="${project.name}.jar" />
		<delete file="../${project.name}.jar" />
	</target>

	<!-- Compile full version WTK with MIDP-1.0 and test -->
	<target name="compile.1.0" depends="prepare.midp1.0,prepare.cldc1.0">
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile full version WTK with MIDP-1.0, regular memory, and test -->
	<target name="compile.1.0.reg" depends="prepare.regularmem,prepare.midp1.0,prepare.cldc1.0">
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile full version WTK with MIDP-1.0, regular memory, smartphone, and test -->
	<target name="compile.1.0.reg.smartphone" depends="prepare.regularmem,prepare.midp1.0,prepare.cldc1.0,prepare.smartphone">
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile full version WTK with MIDP-1.0 and test -->
	<target name="compile.1.0.intlink" depends="prepare.midp1.0,prepare.cldc1.0,prepare.intlink">
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile full version using WTK with MIDP-2.0 and test -->
	<target name="compile.2.0" depends="prepare.midp2.0,prepare.cldc1.0">
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile full version using WTK with MIDP-2.0, test, and novice -->
	<target name="compile.2.0.novice" depends="prepare.midp2.0,prepare.cldc1.0,prepare.novice">
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile internet install link version WTK with MIDP-2.0 and test -->
	<target name="compile.2.0.intlink" depends="prepare.midp2.0,prepare.cldc1.0,prepare.intlink">
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Future as CLDC-1.1 features not used -->
	<!-- Compile using WTK with MIDP-2.0 CLDC-1.1 and test -->
	<target name="compile.2.0.cldc.1.1" depends="prepare.midp2.0,prepare.cldc1.1">
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile using WTK with MIDP-2.0 and JSR-75 and test -->
	<target name="compile.2.0.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75" >
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile using WTK with MIDP-2.0 and JSR-75 and test -->
	<target name="compile.2.0.cldc.1.1.jsr75" depends="prepare.midp2.0,prepare.cldc1.1,prepare.jsr75" >
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile using WTK with MIDP-2.0, JSR-75, previous code and test -->
	<target name="compile.2.0.jsr75.test" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75" >
		<antcall target="display.props" />
		<antcall target="compile" inheritAll="true" >
			<param name="src" value="${src}" />
			<param name="unproc.src" value="${unproc.src}" />
			<param name="presrc" value="${presrc}" />
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Run using WTK with MIDP-2.0 and JSR-75 and test -->
	<target name="run.2.0.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75">
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
		<antcall target="build" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
		<antcall target="run" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile using WTK with MIDP-2.0, Itunes, JSR-75 and test -->
	<target name="compile.2.0.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.smartphone,prepare.jsr75" >
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile using WTK with MIDP-2.0, Itunes, and test -->
	<target name="compile.2.0.cldc.1.1.smartphone" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.test" >
		<antcall target="compile" />
	</target>

	<!-- Compile using WTK with MIDP-2.0, Itunes, JSR-75 and test -->
	<target name="compile.2.0.cldc.1.1.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.jsr75" >
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Compile using WTK with MIDP-2.0, Itunes, Signed, JSR-75 and test -->
	<target name="compile.2.0.cldc.1.1.smartphone.signed.jsr75" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.signed,prepare.jsr75,prepare.verisign" >
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Future.  No code for JSR-238 now. -->
	<!-- Compile for MIDP 1.0 as a release (no test) -->
	<target name="compile.2.0.jsr238" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr238" > 
		<antcall target="compile" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- Preprocess for MIDP 1.0 as a release (no test) -->
	<!-- This puts the code into src directory for use with NetBeans, etc. -->
	<target name="dist.preprocess.1.0" depends="prepare.midp1.0,prepare.cldc1.0" >
		<antcall target="preprocess" inheritAll="true" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
		<!-- Copy preprocessed src to unprocessed source to allow the -->
		<!-- src to be checked in or compiled with Netbeans -->
		<antcall target="copy.comp.src" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Preprocess for MIDP 2.0 as a release (no test) -->
	<!-- This puts the code into src directory. -->
	<!-- There is no novice preprocess given that novice has the same -->
	<!-- compile options as MIDP-2.0. -->
	<target name="dist.preprocess.2.0" depends="prepare.midp2.0,prepare.cldc1.0">
		<antcall target="preprocess" inheritAll="true" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
		<!-- Copy preprocessed src to unprocessed source to allow the -->
		<!-- src to be checked in or compiled with Netbeans -->
		<antcall target="copy.comp.src" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Preprocess for MIDP 2.0 and JSR-75 as a release (no test) -->
	<!-- This puts the code into src directory for use with NetBeans, etc. -->
	<target name="dist.preprocess.2.0.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75" >
		<antcall target="preprocess" inheritAll="true" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
		<!-- Copy preprocessed src to unprocessed source to allow the -->
		<!-- src to be checked in or compiled with Netbeans -->
		<antcall target="copy.comp.src" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Preprocess for MIDP 2.0, and Itunes as a release (no test) -->
	<!-- This puts the code into src directory for use with NetBeans, etc. -->
	<target name="dist.preprocess.2.0.smartphone" depends="prepare.midp2.0,prepare.cldc1.0,prepare.smartphone" >
		<antcall target="preprocess" inheritAll="true" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
		<!-- Copy preprocessed src to unprocessed source to allow the -->
		<!-- src to be checked in or compiled with Netbeans -->
		<antcall target="copy.comp.src" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Preprocess for MIDP 2.0, Itunes, and JSR-75 as a release (no test) -->
	<!-- This puts the code into src directory for use with NetBeans, etc. -->
	<target name="dist.preprocess.2.0.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.smartphone,prepare.jsr75" >
		<antcall target="preprocess" inheritAll="true" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
		<!-- Copy preprocessed src to unprocessed source to allow the -->
		<!-- src to be checked in or compiled with Netbeans -->
		<antcall target="copy.comp.src" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Future preprocess for MIDP 2.0 and JSR-238 as a release (no test) -->
	<!-- This puts the code into src directory for use with NetBeans, etc. -->
	<target name="dist.preprocess.2.0.jsr238" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr238" >
		<antcall target="preprocess" inheritAll="true" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
		<antcall target="copy.comp.src" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- test preprocess for MIDP 2.0 and JSR-75 as a release (no test) -->
	<!-- This puts the code into src directory for use with NetBeans, etc. -->
	<target name="test.preprocess.2.0.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75">
		<antcall target="preprocess" inheritAll="true" >
			<param name="no.release" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
		<!-- Copy preprocessed src to unprocessed source to allow the -->
		<!-- src to be checked in or compiled with Netbeans -->
		<antcall target="copy.comp.src" >
			<param name="no.release" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Compile distriubuted full version for MIDP 1.0 as a release (no test) -->
	<target name="dist.compile.1.0" depends="prepare.midp1.0,prepare.cldc1.0" >
		<antcall target="compile" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Compile distriubuted full version for MIDP 1.0, regular memory, as a release (no test) -->
	<target name="dist.compile.1.0.reg" depends="prepare.regularmem,prepare.midp1.0,prepare.cldc1.0" >
		<antcall target="compile" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Compile distriubuted full version for MIDP 1.0, regular memory, as a release (no test) -->
	<target name="dist.compile.1.0.reg.smartphone" depends="prepare.regularmem,prepare.midp1.0,prepare.cldc1.0,prepare.smartphone" >
		<antcall target="compile" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Compile distriubuted internet install link version for MIDP 1.0 as a release (no test) -->
	<target name="dist.compile.1.0.intlink" depends="prepare.midp1.0,prepare.cldc1.0,prepare.intlink" >
		<antcall target="compile" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Compile distributed full version for MIDP 2.0 as a release (no test) -->
	<target name="dist.compile.2.0" depends="prepare.midp2.0,prepare.cldc1.0" >
		<antcall target="compile" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Compile distributed internet install link version for MIDP 2.0 as a release (no test) -->
	<target name="dist.compile.2.0.intlink" depends="prepare.midp2.0,prepare.cldc1.0,prepare.intlink" >
		<antcall target="compile" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Compile for MIDP 2.0 and JSR-75 for release -->
	<target name="dist.compile.2.0.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75" >
		<antcall target="compile" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Compile for MIDP 2.0 and Itunes and JSR-75 for release -->
	<target name="dist.compile.2.0.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.smartphone,prepare.jsr75" >
		<antcall target="compile" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Compile using WTK with MIDP-2.0, CLDC 1.1, Itunes, and test -->
	<target name="dist.compile.2.0.cldc.1.1.smartphone" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.test" >
		<antcall target="compile" />
	</target>

	<!-- Compile using WTK with MIDP-2.0, CLDC 1.1, Itunes, JSR-75 and test -->
	<target name="dist.compile.2.0.cldc.1.1.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.jsr75" >
		<antcall target="compile" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Compile for MIDP 2.0, CLDC 1.1, Itunes, Signed and JSR-75 for release -->
	<target name="dist.compile.2.0.cldc.1.1.smartphone.signed.jsr75" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.signed,prepare.jsr75,prepare.verisign" >
		<antcall target="compile" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.compile.2.0.jsr238" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr238,prepare.release" > 
		<antcall target="compile" />
	</target>

	<!-- Compile all. -->
	<target name="compile.all" > 
		<antcall target="compile.1.0" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
		<antcall target="compile.2.0" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
		<antcall target="compile.2.0.cldc.1.1" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
		<antcall target="compile.2.0.jsr75" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
		<antcall target="compile.2.0.cldc.1.1.jsr75" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
		<antcall target="compile.2.0.smartphone.jsr75" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
		<antcall target="compile.2.0.cldc.1.1.smartphone.jsr75" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
		<antcall target="compile.2.0.jsr75.test" >
			<param name="no.staging" value="true" />
			<param name="no.release" value="true" />
		</antcall>
	</target>

	<!-- These are do create release full versions for MIDP-1.0. -->
	<target name="dist.midp.1.0" depends="prepare.midp1.0,prepare.cldc1.0,prepare.stage,prepare.no.stage,prepare.release" unless="no.1.0" >
		<antcall target="dist.version" inheritAll="yes" >
			<param name="upload.to.google" value="true" />
			<param name="google.labels" value="--labels=Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="true" />
		</antcall>
	</target>

	<!-- These are do create release internet install link version for MIDP-1.0 -->
	<target name="dist.midp.1.0.intlink" depends="prepare.midp1.0,prepare.cldc1.0,prepare.stage,prepare.no.stage,prepare.intlink,prepare.release" unless="no.1.0.intlink" >
		<antcall target="dist.version" inheritAll="yes" >
			<param name="upload.to.google" value="false" />
			<param name="google.labels" value="--labels=Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.1.0.reg" depends="prepare.regularmem,prepare.midp1.0,prepare.cldc1.0,prepare.stage,prepare.no.stage,prepare.release" unless="no.1.0.reg" >
		<antcall target="dist.version" inheritAll="yes" >
			<param name="upload.to.google" value="false" />
			<param name="google.labels" value="--labels=Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.1.0.reg.smartphone" depends="prepare.regularmem,prepare.midp1.0,prepare.cldc1.0,prepare.stage,prepare.no.stage,prepare.release,prepare.smartphone" unless="${no.1.0.reg.smartphone}" >
		<antcall target="dist.version" inheritAll="yes" >
			<param name="upload.to.google" value="false" />
			<param name="google.labels" value="--labels=Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0" depends="prepare.midp2.0,prepare.cldc1.0" unless="no.2.0" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.google" value="true" />
			<param name="google.labels" value="--labels=${stage.featured}Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.intlink" depends="prepare.midp2.0,prepare.cldc1.0,prepare.intlink" unless="no.2.0.intlink" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.google" value="false" />
			<param name="google.labels" value="--labels=${stage.featured}Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.signed.verisign" depends="prepare.midp2.0,prepare.cldc1.0,prepare.signed,prepare.verisign" unless="no.2.0.signed.verisign" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.signed.thawte" depends="prepare.midp2.0,prepare.cldc1.0,prepare.signed,prepare.thawte" unless="no.2.0.signed.thawte" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Do MIDP 2.0 with novice version. -->
	<target name="dist.midp.2.0.novice" depends="prepare.midp2.0,prepare.cldc1.0,prepare.novice" unless="no.2.0.novice" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="make.build.files" value="true" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.cldc.1.1" depends="prepare.midp2.0,prepare.cldc1.1" unless="no.2.0.cldc.1.1" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="make.build.files" value="true" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75" unless="no.2.0.jsr75" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.google" value="true" />
			<param name="google.labels" value="--labels=Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="jsr" value="JSR-75" />
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.jsr75.signed.verisign" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75,prepare.signed,prepare.verisign" unless="no.2.0.jsr75.signed.verisign" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.google" value="true" />
			<param name="google.labels" value="--labels=Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="jsr" value="JSR-75" />
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.jsr75.signed.thawte" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75,prepare.signed,prepare.thawte" unless="no.2.0.jsr75.signed.thawte" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.google" value="true" />
			<param name="google.labels" value="--labels=Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="jsr" value="JSR-75" />
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.cldc.1.1.jsr75" depends="prepare.midp2.0,prepare.cldc1.1,prepare.jsr75" unless="no.2.0.cldc.1.1.jsr75" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="make.build.files" value="true" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.smartphone" depends="prepare.midp2.0,prepare.cldc1.0,prepare.smartphone" unless="no.2.0.smartphone" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.smartphone,prepare.jsr75" unless="no.2.0.smartphone.jsr75" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.cldc.1.1.smartphone" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.release" unless="no.2.0.cldc.1.1.smartphone" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.google" value="true" />
			<param name="google.labels" value="--labels=Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="false" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.cldc.1.1.smartphone.signed.verisign" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.signed,prepare.verisign" unless="no.2.0.cldc.1.1.smartphone.signed.verisign" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
			<param name="need.applet" value="true" />
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.cldc.1.1.smartphone.signed.thawte" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.signed,prepare.thawte" unless="no.2.0.cldc.1.1.smartphone.signed.thawte" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
			<param name="need.applet" value="true" />
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.cldc.1.1.smartphone.signed.godaddy" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.signed,prepare.godaddy" unless="no.2.0.cldc.1.1.smartphone.signed.godaddy" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
			<param name="need.applet" value="true" />
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.cldc.1.1.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.jsr75" unless="no.2.0.cldc.1.1.smartphone.jsr75" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="make.build.files" value="false" />
			<param name="upload.to.google" value="true" />
			<param name="google.labels" value="--labels=Type-Executable,OpSys-All" />
			<param name="upload.to.sftp" value="true" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.cldc.1.1.smartphone.signed.verisign.jsr75" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.signed,prepare.verisign,prepare.jsr75" unless="no.2.0.cldc.1.1.smartphone.signed.verisign.jsr75" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="false" />
			<param name="need.applet" value="true" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.cldc.1.1.smartphone.signed.thawte.jsr75" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.signed,prepare.thawte,prepare.jsr75" unless="no.2.0.cldc.1.1.smartphone.signed.thawte.jsr75" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="false" />
			<param name="need.applet" value="true" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.cldc.1.1.smartphone.signed.godaddy.jsr75" depends="prepare.midp2.0,prepare.cldc1.1,prepare.smartphone,prepare.signed,prepare.godaddy,prepare.jsr75" unless="no.2.0.cldc.1.1.smartphone.signed.godaddy.jsr75" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
			<param name="make.build.files" value="false" />
			<param name="need.applet" value="true" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist.midp.2.0.jsr238" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr238" unless="no.2.0.jsr238" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="make.build.files" value="false" />
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Package MIDP 1.0 version. -->
	<target name="package.midp.1.0"  depends="prepare.midp1.0,prepare.cldc1.0" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="no.release" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Package MIDP 2.0 version. -->
	<target name="package.midp.2.0" depends="prepare.midp2.0,prepare.cldc1.0" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="no.release" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Package MIDP 2.0 with JSR-75 version. -->
	<target name="package.midp.2.0.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.jsr75" unless="no.2.0.jsr75" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="no.release" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<!-- Package MIDP 2.0 with itunes version with JSR-75 version. -->
	<target name="package.midp.2.0.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.smartphone,prepare.jsr75" unless="no.2.0.smartphone.jsr75" >
		<antcall target="dist.version" inheritAll="true" >
			<param name="no.release" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="run.midp.2.0.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.smartphone,prepare.jsr75" unless="no.2.0.smartphone.jsr75" >
		<antcall target="run" inheritAll="true" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="googlecode.initialize" depends="prepare" >
		<echo message="#!/bin/bash&#10;" file="${distgooglecode}/googleupload.sh" append="true" />
		<echo message="googlecode_upload.pl --user=${svn.user} --pass=${svn.pass} --project=${svn.src} --progress --file=${dist.project.src.zip} --summary=&quot;${stage.stable.text} Mobile RSS Reader - Version ${MIDLETVERSROOT} ${ustage.txt}latest ${stage.phase.text} source zip.&quot; --labels=Type-Source&#10;" file="${distgooglecode}/googleupload.sh" append="true" />
		<echo message="googlecode_upload.pl --user=${svn.user} --pass=${svn.pass} --project=${svn.src} --progress --file=${dist.project.expert.zip} --summary=&quot;${stage.stable.text} Expert (use ${project.file.prefix}-v${MIDLETVERSROOT}-bin.zip most people don't need expert version and expert is confusing) ${stage.stable.text} Mobile RSS Reader - Version ${MIDLETVERSROOT} ${ustage.txt}latest ${stage.phase.text} binaries for 4% of phones&quot; --labels=Type-Archive,OpSys-All&#10;" file="${distgooglecode}/googleupload.sh" append="true" />
		<echo message="googlecode_upload.pl --user=${svn.user} --pass=${svn.pass} --project=${svn.src} --progress --file=${dist.project.smartphone.zip} --summary=&quot;${stage.stable.text} Mobile RSS Reader - Version ${MIDLETVERSROOT} ${ustage.txt}latest ${stage.phase.text} binaries for smartphones only (this uses up too much memory for non-smartphones.  also included in expert binaries)&quot; --labels=Type-Archive,OpSys-All&#10;" file="${distgooglecode}/googleupload.sh" append="true" />
		<echo message="googlecode_upload.pl --user=${svn.user} --pass=${svn.pass} --project=${svn.src} --progress --file=${dist.project.bin.zip} --summary=&quot;${stage.stable.text} Mobile RSS Reader - Version ${MIDLETVERSROOT} ${ustage.txt}latest ${stage.phase.text} binaries for 96% of phones (also included in expert binaries)&quot; --labels=${stage.featured}Type-Archive,OpSys-All&#10;" file="${distgooglecode}/googleupload.sh" append="true" />
	</target>

	<target name="make.zip.files" depends="prepare" unless="skip.svn.op" >
		<property name="distdir" value="${distjardir}/RSSReader-${FMIDLETVERSROOT}${dist.stage.file}" />
		<mkdir dir="${distdir}" />
		<copy todir="${distdir}/dist" overwrite="true" >
			<fileset dir="${dist}" excludes="**/RE*.txt,**/**novice**" />
		</copy>
		<copy file="${distall}/READMEAll.txt" tofile="${distdir}/dist/README.txt" overwrite="true" />
		<zip destfile="${distproject}/${dist.project.expert.zip}" basedir="${distjardir}" />
		<delete includeemptydirs="true">
			<fileset dir="${distdir}" excludes="**/**smartphone**" />
			<fileset dir="${distdir}" includes="**/**midp10**,**/**cldc10**,**/*.cso,**/*.debug" />
		</delete>
		<delete includeemptydirs="true">
			<fileset dir="${distdir}" includes="**/**smartphone_jsr75_${project.name}**.jar,**/**smartphone_${project.name}**.jar" />
		</delete>
		<copy file="${distall}/READPODCASTME.txt" tofile="${distdir}/dist/README.txt" overwrite="true" />
		<zip destfile="${distproject}/${dist.project.smartphone.zip}" basedir="${distjardir}" />
		<delete includeemptydirs="true">
			<fileset dir="${distdir}"/>
		</delete>
		<copy todir="${distdir}/dist" overwrite="true" >
			<fileset dir="${dist}" excludes="**/RE*.txt,**/**smartphone**,**/*cldc11**,**/*cso,**/*debug" />
			<fileset dir="${dist}" includes="**/*midp10**cldc10**,**midp20**cldc10**" />
		</copy>
		<copy file="${distall}/README.txt" tofile="${distdir}/dist/README.txt" overwrite="true" />
		<zip destfile="${distproject}/${dist.project.bin.zip}" basedir="${distjardir}" />
		<delete dir="${distdir}/dist" />
		<copy todir="${distdir}" overwrite="true" >
			<fileset dir="${main}" />
		</copy>
		<zip destfile="${distproject}/${dist.project.src.zip}" basedir="${distjardir}" />
		<copy todir="${distdir}/dist" overwrite="true" >
			<fileset dir="${dist}" excludes="**/RE*.txt" />
		</copy>
	</target>

	<target name="dist.dev.status" depends="release.buildno,prepare.release,prepare.stage,prepare.no.stage" >
		<antcall target="clean" />
		<delete dir="${dist}" />
		<mkdir dir="${dist}" />
		<mkdir dir="${distgooglecode}" />
		<mkdir dir="${distall}" />
		<delete dir="${build}" />
		<mkdir dir="${build}" />
		<mkdir dir="${dist}" />
	    <echo message="main build.number=${build.number}" />
		<antcall target="dist.svn.dirs" />
		<property name="dist.project.prefix" value="${project.file.prefix}-v${FMIDLETVERSROOT}${dist.stage.file}" />
		<property name="dist.project.expert.zip" value="${dist.project.prefix}-expert-bin.zip" />
		<property name="dist.project.smartphone.zip" value="${dist.project.prefix}-smartphone-bin.zip" />
		<property name="dist.project.bin.zip" value="${dist.project.prefix}-bin.zip" />
		<property name="dist.project.src.zip" value="${dist.project.prefix}-src.zip" />
		<mkdir dir="${ftpdist.dir}" />
		<copy file="${res.dir}/apache.htaccess" todir="${ftpdist.dir}" overwrite="true" />
		<property name="yinlight.tmp.subdir" value="" />
		<property name="yinlight.tmp.subpath" value="" />
		<antcall target="sourceforge.initialize" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
		</antcall>
		<antcall target="yinlight.initialize" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
		</antcall>
		<antcall target="googlecode.initialize" inheritAll="true" />
		<antcall target="dist.midp.1.0" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.1.0.reg" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.1.0.reg.smartphone" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.1.0.intlink" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.novice" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.jsr75" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.jsr75.signed.verisign" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.jsr75.signed.thawte" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.cldc.1.1.jsr75" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.smartphone" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.smartphone.jsr75" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.cldc.1.1.smartphone" >
			<param name="sftp.no.sun" value="true" />
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.cldc.1.1.smartphone.signed.verisign" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.cldc.1.1.smartphone.signed.thawte" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.cldc.1.1.smartphone.jsr75" >
			<param name="sftp.no.sun" value="true" />
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.cldc.1.1.smartphone.signed.verisign.jsr75" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.cldc.1.1.smartphone.signed.thawte.jsr75" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.cldc.1.1.smartphone.signed.godaddy.jsr75" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.cldc.1.1" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.signed.verisign" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.signed.thawte" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0.intlink" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.midp.2.0" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<antcall target="dist.preprocess.2.0" >
			<param name="build.number" value="${build.number}" />
			<param name="release.buildno" value="true" />
		</antcall>
		<chmod file="${distgooglecode}/googleupload.sh" perm="744" />
		<antcall target="sourceforge.finish" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
		</antcall>
		<antcall target="yinlight.finish" inheritAll="true" >
			<param name="upload.to.sftp" value="true" />
		</antcall>
		<antcall target="make.zip.files" inheritAll="true" />
		<delete failonerror="false" includeemptydirs="true">
			<fileset dir="./.rms" />
			<fileset dir="./" includes="**/*.tmp" />
			<fileset dir="./" includes="**/LogFile.txt" />
			<fileset dir="../wtkbuild" includes="**/*.cod" />
			<fileset dir="../" includes="rim*.cod" />
			<fileset dir="../" includes="RSSReader-**.debug" />
		</delete>
	</target>

	<target name="dist.all" depends="prepare.temporary,prepare.development,prepare.beta,prepare.rc,prepare.production" >
		<antcall target="dist.dev.status" inheritAll="true" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

	<target name="dist" >
		<antcall target="dist.all" inheritAll="true" >
			<param name="no.1.0.reg" value="true" />
			<param name="no.1.0.reg.smartphone" value="true" />
			<param name="no.2.0.signed.verisign" value="true" />
			<param name="no.2.0.signed.thawte" value="true" />
			<param name="no.2.0.jsr75.signed.verisign" value="true" />
			<param name="no.2.0.jsr75.signed.thawte" value="true" />
			<param name="no.2.0.itunes" value="true" />
			<param name="no.2.0.itunes.jsr75" value="true" />
			<param name="no.2.0.jsr75.signed.verisign" value="true" />
			<param name="no.2.0.jsr75.signed.thawte" value="true" />
			<param name="no.2.0.cldc.1.1" value="true" />
			<param name="no.2.0.cldc.1.1.itunes" value="true" />
			<param name="no.2.0.cldc.1.1.jsr75" value="true" />
			<param name="no.2.0.jsr238" value="true" />
		</antcall>
	</target>

	<target name="dist.no.signed" >
		<antcall target="dist" inheritAll="true" >
			<param name="no.1.0.reg" value="true" />
			<param name="no.2.0.cldc.1.1.itunes.signed.verisign" value="true" />
			<param name="no.2.0.cldc.1.1.itunes.signed.thawte" value="true" />
			<param name="no.2.0.cldc.1.1.itunes.signed.verisign.jsr75" value="true" />
			<param name="no.2.0.cldc.1.1.itunes.signed.thawte.jsr75" value="true" />
		</antcall>
	</target>

	<target name="dist.test" >
		<antcall target="dist.all" inheritAll="true" >
			<param name="no.1.0" value="true" />
			<param name="no.1.0.reg" value="true" />
			<param name="no.2.0.cldc.1.1.itunes.jsr75" value="true" />
			<param name="no.2.0.cldc.1.1.itunes" value="true" />
			<param name="no.2.0.cldc.1.1.jsr75" value="true" />
			<param name="no.2.0.cldc.1.1" value="true" />
			<param name="no.2.0.itunes.jsr75" value="true" />
			<param name="no.2.0.itunes" value="true" />
			<param name="no.2.0.jsr238" value="true" />
			<param name="no.2.0.novice" value="true" />
			<param name="no.2.0" value="true" />
		</antcall>
	</target>

	<target name="dist.smartphone.test" >
		<antcall target="dist.all" inheritAll="true" >
			<param name="no.1.0.intlink" value="true" />
			<param name="no.1.0.reg" value="true" />
			<param name="no.1.0" value="true" />
			<param name="no.2.0.cldc.1.1.jsr75" value="true" />
			<param name="no.2.0.cldc.1.1.smartphone.signed.godaddy.jsr75" value="true" />
			<param name="no.2.0.cldc.1.1.smartphone.signed.godaddy" value="true" />
			<param name="no.2.0.cldc.1.1.smartphone.signed.thawte.jsr75" value="true" />
			<param name="no.2.0.cldc.1.1.smartphone.signed.thawte" value="true" />
			<param name="no.2.0.cldc.1.1" value="true" />
			<param name="no.2.0.intlink" value="true" />
			<param name="no.2.0.itunes.jsr75" value="true" />
			<param name="no.2.0.itunes" value="true" />
			<param name="no.2.0.jsr238" value="true" />
			<param name="no.2.0.jsr75.signed.thawte" value="true" />
			<param name="no.2.0.jsr75.signed.verisign" value="true" />
			<param name="no.2.0.jsr75" value="true" />
			<param name="no.2.0.novice" value="true" />
			<param name="no.2.0.signed.thawte" value="true" />
			<param name="no.2.0.signed.verisign" value="true" />
			<param name="no.2.0.smartphone.jsr75" value="true" />
			<param name="no.2.0.smartphone" value="true" />
			<param name="no.2.0" value="true" />
		</antcall>
	</target>

	<target name="copy.device.bin" depends="prepare" if="midlet.home" >
		<mkdir dir="${midlet.home}/${bin}" />
		<copy file="${bin}/${project.name}.jar" tofile="${midlet.home}/${bin}/${project.name}.jar" overwrite="true" />
		<copy file="${bin}/${project.name}.jad" tofile="${midlet.home}/${bin}/${project.name}.jad" />
	</target>

	<!-- Start the MIDlet suite -->
	<target name="run" depends="prepare" >
		<wtkrun jadfile="${dist}/${build.file.root}.jad" device="DefaultColorPhone" wait="false" />

	</target>

	<target name="run.dist.version"  depends="prepare" >
		<echo message="emulator.jar=${path.emulator.jar}" />
		<property name="run.jar" value="${dist}/${build.file.root}.jar" />
		<echo message="jar=${run.jar}" />
		<java classname="${emulator.class}" fork="true" >
			<classpath>
				<pathelement location="${path.emulator.jar}" />
				<pathelement location="${run.jar}" />
			</classpath>
			<arg value="${midlet.class}" />
		</java>
	</target>

	<target name="run.dist.midp.2.0.smartphone.jsr75" depends="prepare.midp2.0,prepare.cldc1.0,prepare.smartphone,prepare.jsr75" unless="run.no.2.0.smartphone.jsr75" >
		<antcall target="run.dist.version" inheritAll="true" >
			<param name="no.test" value="true" />
			<param name="no.staging" value="true" />
		</antcall>
	</target>

</project>
